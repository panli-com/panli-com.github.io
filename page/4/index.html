<!doctype html>
<html class="theme-next   use-motion ">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  
    <link href='//fonts.lug.ustc.edu.cn/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
  



<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=0.4.5.2" rel="stylesheet" type="text/css" />



  <meta name="description" content="不折腾，哪来的新技术" />




  <meta name="keywords" content="panli, ued" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=0.4.5.2" />






<meta name="description" content="不折腾，哪来的新技术">
<meta property="og:type" content="website">
<meta property="og:title" content="Panli团队技术博客">
<meta property="og:url" content="http://panli-com.github.io/page/4/index.html">
<meta property="og:site_name" content="Panli团队技术博客">
<meta property="og:description" content="不折腾，哪来的新技术">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Panli团队技术博客">
<meta name="twitter:description" content="不折腾，哪来的新技术">



<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: '',
    sidebar: 'post',
    motion: true
  };
</script>

  <title> Panli团队技术博客 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->
  






  <div class="container one-column 
   page-home 
">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Panli团队技术博客</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">追寻最新技术领域</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu ">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-th fa-fw"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-user fa-fw"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404.html" rel="section">
            
              <i class="menu-item-icon fa fa-heartbeat fa-fw"></i> <br />
            
            公益404
          </a>
        </li>
      

      
      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content">
          
  <section id="posts" class="posts-expand">
    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="/2015/11/09/vscode/Mac命令行用Visual-Studio-Code编辑器打开/" itemprop="url">
                  Mac命令行用Visual Studio Code编辑器打开
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-11-09T15:12:22+08:00" content="2015-11-09">
              2015-11-09
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/开发工具/" itemprop="url" rel="index">
                    <span itemprop="name">开发工具</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/11/09/vscode/Mac命令行用Visual-Studio-Code编辑器打开/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/11/09/vscode/Mac命令行用Visual-Studio-Code编辑器打开/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h2 id="Visual-Studio-Code-不卡了"><a href="#Visual-Studio-Code-不卡了" class="headerlink" title="Visual Studio Code 不卡了"></a>Visual Studio Code 不卡了</h2><p>前些日子一直在用 Atom 编辑器 ，很喜欢代码的面向，可用了些时间后 感觉越来越卡。<br>于是上手 Visual Studio Code，听说不卡！ O(∩_∩)O哈哈~</p> <h2 id="Setting-up-Visual-Studio-Code"><a href="#Setting-up-Visual-Studio-Code" class="headerlink" title="Setting up Visual Studio Code"></a>Setting up Visual Studio Code</h2><p>Getting up and running with VS Code is quick and easy. Follow the platform specific guides below as well as the list of handy tools.</p> <h3 id="Mac-OS-X"><a href="#Mac-OS-X" class="headerlink" title="Mac OS X"></a>Mac OS X</h3><ol> <li><a href="http://go.microsoft.com/fwlink/?LinkID=534106" target="_blank" rel="external">Download Visual Studio Code</a> for Mac OS X.</li> <li>Double-click on VSCode-osx.zip to expand the contents.</li> <li>Drag Visual Studio Code.app to the Applications folder, making it available in the Launchpad.</li> <li>Add VS Code to your Dock by right-clicking on the icon and choosing Options, Keep in Dock.</li> </ol> <blockquote> <p>Tip: If you want to run VS Code from the terminal, append the following to your ~/.bash_profile file (~/.zshrc in case you use zsh).</p> </blockquote> <figure class="highlight gauss"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">code</span> () &#123; VSCODE_CWD=<span class="string">"$PWD"</span> <span class="keyword">open</span> -n -b <span class="string">"com.microsoft.VSCode"</span> --args $* ;&#125;</span><br></pre></td></tr></table></figure> <p>Now, you can simply type code . in any folder to start editing files in that folder.</p> <p>参考 <a href="https://code.visualstudio.com/Docs/editor/setup" target="_blank" rel="external">https://code.visualstudio.com/Docs/editor/setup</a></p>
            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="/2015/11/06/git/git学习总结/" itemprop="url">
                  git学习总结
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-11-06T09:46:48+08:00" content="2015-11-06">
              2015-11-06
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/管理工具/" itemprop="url" rel="index">
                    <span itemprop="name">管理工具</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/11/06/git/git学习总结/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/11/06/git/git学习总结/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h2 id="从svn到git"><a href="#从svn到git" class="headerlink" title="从svn到git"></a>从svn到git</h2><p>两者都是优秀的版本管理工具（giter请不要鄙视svner）</p> <ul> <li>svn上手非常容易，操作简单</li> <li>git功能强大，但是要熟练使用分支不算容易</li> </ul> <p>git因为是分布式的，所以其核心就是分支（只有master分支情况下和svn差不多？），分支的意义在于，可以将项目代码按照功能、模块拆分成不同的分支。比如这个产品要加一个支付功能和一个登陆功能，可以创建两个分支，交给不同的开发人员并行开发。登陆功能先开发完，测试无误后合并改分支到master分支，master分支部署上线。支付功能虽然没有开发完成，但是在另一条分支上，所以产品上线和功能开发完全不受影响。这才是分布式开发的高效模式。</p> <p>被git坑了一个星期之后决心把官方文档看一下，结合实践经验进行了整理。</p> <hr>  <h2 id="新手常见问题"><a href="#新手常见问题" class="headerlink" title="新手常见问题"></a>新手常见问题</h2><ol> <li><p>如何查看有哪些分支？<br><code>git branch -a</code></p> </li> <li><p>如何强制检出/切换分支或分支指定文件<br><code>git checkout &lt;branch&gt; [file] [-f]</code><br>强制更新，以branch版本的代码为主</p> </li> <li><p>提交代码出现冲突冲突怎么办？<br><code>hint: Updates were rejected because the tip of your current branch is behind</code><br><code>hint: its remote counterpart. Integrate the remote changes (e.g.</code><br><code>hint: &#39;git pull ...&#39;) before pushing again.</code><br><code>hint: See the &#39;Note about fast-forwards&#39; in &#39;git push --help&#39; for details.</code><br>先切换分支，然后拉取分支上最新的代码覆盖到本地<br><code>git pull</code><br>添加或者提交代码，解决冲突之后<br><code>git push</code></p> </li> <li><p>如何新建分支<br><code>git checkout -b &lt;branch_name&gt;</code><br>本地建立 branch 並立即切換到新分支<br><code>git branch -m &lt;new_name&gt;</code><br>修改分支名称 </p> </li> <li><p>从远程仓库拉取代码到本地仓库，并建立跟踪关系<br><code>git clone http://xxx.git</code><br>或者<br><code>get clone git@xxx.git</code><br>然后<br><code>git checkout -b &lt;本地新分支名&gt; &lt;对应的远程分支名&gt;</code></p> </li> <li><p>远程仓库新建了一个分支，如何更新远程分支信息<br><code>git fetch &lt;remote base&gt;</code></p> </li> <li><p>如何在远程仓库新建一个分支<br><code>git branch &lt;branch name&gt;</code><br>新建一个本地分支，按照正常流程提交完代码后，推送到远程<br><code>git push &lt;remote base&gt; &lt;local branch&gt;:&lt;remote branch&gt;</code></p> </li> </ol> <h2 id="实用指令"><a href="#实用指令" class="headerlink" title="实用指令"></a>实用指令</h2><h3 id="reset"><a href="#reset" class="headerlink" title="reset"></a>reset</h3><p><code>git reset [file]</code><br>取消暂存 </p> <h3 id="remote"><a href="#remote" class="headerlink" title="remote"></a>remote</h3><p>查看远程仓库名 </p> <p><code>git remote -v</code><br>查看远程仓库url</p> <p><code>git remote add &lt;basename&gt; &lt;url&gt;</code><br>新增远程仓库</p> <p><code>git remote show &lt;basename&gt;</code><br>查看远程仓库详细信息</p> <p><code>git remote rename &lt;old basename&gt; &lt;new basename&gt;</code><br>重命名远程仓库</p> <h3 id="pull"><a href="#pull" class="headerlink" title="pull"></a>pull</h3><p>相当于fetch和merge</p> <h3 id="push"><a href="#push" class="headerlink" title="push"></a>push</h3><p><code>git push [remote_branch] [local_branch]</code><br>推送本地仓库代码到远程仓库，相当于svn的commit</p> <p><code>git push &lt;remote base&gt; [tag name]</code><br>推送本地标签到远程仓库</p> <p><code>git push &lt;remote base&gt; &lt;remote branch&gt;:&lt;local branch&gt;</code><br>将本地分支推送到指定的远程分支</p> <p><code>git push &lt;remote base&gt; --delete &lt;remote branch&gt;</code><br>删除远程分支</p> <h3 id="tag"><a href="#tag" class="headerlink" title="tag"></a>tag</h3><p>查看标签（用来标记标志性的稳定版本信息）</p> <p><code>git tag -l &#39;[expression]&#39;</code><br>查看那符合正则表达式的</p> <p><code>git tag -a &lt;tag name&gt; -m &lt;comment&gt;</code><br>添加带注释的标签</p> <p><code>git tag -a &lt;tag name&gt; &lt;md5&gt;</code><br>对某个版本打标签</p> <p><code>git tag [tag name]</code><br>如果没有标签名，则为查看所有标签。带标签名则为新建标签</p> <h3 id="merge"><a href="#merge" class="headerlink" title="merge"></a>merge</h3><p><code>git merge &lt;branch name&gt;</code><br>将其他分支合并到本分支</p> <h3 id="commit"><a href="#commit" class="headerlink" title="commit"></a>commit</h3><p><code>git commit -a -m &#39;xx&#39;</code><br>暂存并提交</p> <h3 id="branch"><a href="#branch" class="headerlink" title="branch"></a>branch</h3><p><code>git branch</code><br>查看本地仓库分支</p> <p><code>git branch -v</code><br>查看本地仓库分支最后一次提交情况</p> <p><code>git branch -vv</code><br>查看分支跟踪情况</p> <p><code>git branch &lt;branch name&gt;</code><br>新建分支</p> <p><code>git branch -d &lt;branch name&gt;</code><br>删除分支</p> <p><code>git branch [--merged | --no-merged]</code><br>查看已合并|未合并的本地仓库分支</p> <p><code>git branch -u &lt;remote base&gt;/&lt;remote branch&gt;</code><br>修改当前跟踪分支</p> <h3 id="commit-1"><a href="#commit-1" class="headerlink" title="commit"></a>commit</h3><p><code>git commit -a -m &#39;xx&#39;</code><br>提交并且暂存暂存的方法</p> <h3 id="checkout"><a href="#checkout" class="headerlink" title="checkout"></a>checkout</h3><p><code>git checkout -- [file]</code><br>恢复文件</p> <p><code>git checkout -b [branchname] [tagname]</code><br>在特定的版本上创建一个新的分支并切换到此分支</p> <p><code>git checkout -b [local branch] [remote base]/[remote branch]</code><br>将远程分支检出到本地分支</p> <p><code>git checkout --track &lt;remote base&gt;/&lt;remote branch&gt;</code><br>让当前分支跟踪远程分支</p> <p><code>git checkout --track &lt;remote base&gt;/&lt;remote branch&gt;</code><br><code>git checkout -b &lt;local branch&gt; &lt;remote base&gt;/&lt;remote branch&gt;</code><br>让当前分支跟踪到远程分支。两条命令作用基本一致，不同的是第二条命令可以重命名检出的分支。</p> <h3 id="rebase"><a href="#rebase" class="headerlink" title="rebase"></a>rebase</h3><p><code>git rebase [basebranch]</code><br>变基是将一系列提交按照原有次序依次应用到另一分支上，而合并是把最终结果合在一起。</p> <h2 id="小技巧"><a href="#小技巧" class="headerlink" title="小技巧"></a>小技巧</h2><h3 id="查看配置"><a href="#查看配置" class="headerlink" title="查看配置"></a>查看配置</h3><p><code>git config -1</code></p> <h3 id="设置别名"><a href="#设置别名" class="headerlink" title="设置别名"></a>设置别名</h3><p><code>git config --global alias.&lt;name&gt; &lt;commend&gt;</code> </p> <h3 id="保存用户名和密码"><a href="#保存用户名和密码" class="headerlink" title="保存用户名和密码"></a>保存用户名和密码</h3><h4 id="对于http-s-协议，可以用下面命令临时缓存"><a href="#对于http-s-协议，可以用下面命令临时缓存" class="headerlink" title="对于http(s)协议，可以用下面命令临时缓存"></a>对于http(s)协议，可以用下面命令临时缓存</h4><p><code>git config --global credential.helper cache</code><br>开启linux缓存<br><code>git config --global credential.helper wincred</code><br>开启windows缓存</p> <h4 id="对于ssh协议，可以用ssh-key，具体教程网上很多"><a href="#对于ssh协议，可以用ssh-key，具体教程网上很多" class="headerlink" title="对于ssh协议，可以用ssh  key，具体教程网上很多"></a>对于ssh协议，可以用ssh key，具体教程网上很多</h4><p><a href="http://git-scm.com/book/zh/v2" target="_blank" rel="external">权威教程</a></p>
            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="/2015/11/05/redux/redux框架-介绍-三大原则/" itemprop="url">
                  redux框架-介绍(三大原则)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-11-05T13:19:24+08:00" content="2015-11-05">
              2015-11-05
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/redux/" itemprop="url" rel="index">
                    <span itemprop="name">redux</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/11/05/redux/redux框架-介绍-三大原则/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/11/05/redux/redux框架-介绍-三大原则/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h2 id="Redux-可以被描述成三大基础原则："><a href="#Redux-可以被描述成三大基础原则：" class="headerlink" title="Redux 可以被描述成三大基础原则："></a>Redux 可以被描述成三大基础原则：</h2><h3 id="单一数据源"><a href="#单一数据源" class="headerlink" title="单一数据源"></a>单一数据源</h3><blockquote> <p>整个应用的 state 被储存在一棵 object tree 中，它只有一个单一的 store 。</p> </blockquote> <p>这让同构应用开发变得非常容易。来自服务端的 state 可以轻而易举地被序列化并融合到没有额外代码影响的客户端上。<br>由于是单一的 state tree ，调试也变得非常容易。你也可以把应用的 state 保存下来加快开发速度。<br>此外，受益于单一的 state tree ，以前难以实现的像“撤销/重做”这类的功能也变得轻而易举。</p> <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">console</span><span class="selector-class">.log</span>(<span class="selector-tag">store</span><span class="selector-class">.getState</span>());</span><br><span class="line"></span><br><span class="line">&#123;</span><br><span class="line">  <span class="attribute">visibilityFilter</span>: <span class="string">'SHOW_ALL'</span>,</span><br><span class="line">  todos: [&#123;</span><br><span class="line">    text: <span class="string">'Consider using Redux'</span>,</span><br><span class="line">    completed: true,</span><br><span class="line">  &#125;, &#123;</span><br><span class="line">    <span class="attribute">text</span>: <span class="string">'Keep all state in a single tree'</span>,</span><br><span class="line">    completed: false</span><br><span class="line">  &#125;]</span><br></pre></td></tr></table></figure> <h3 id="State-是只读的"><a href="#State-是只读的" class="headerlink" title="State 是只读的"></a>State 是只读的</h3><blockquote> <p>惟一改变 state 的办法就是触发 action，action 是一个描述要发生什么的对象。</p> </blockquote> <p>这让视图和网络请求不能直接修改 state，相反只能表达出需要修改的意图。<br>因为所有的修改都被集中化处理，且严格按照顺序一个接一个执行，因此没有模棱两可的情况需要提防。<br> Action 就是普通对象而已，因此它们可以被日志打印、序列化、储存、后期调试或测试时回放出来。</p> <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"> <span class="selector-tag">store</span><span class="selector-class">.dispatch</span>(&#123;</span><br><span class="line">  <span class="attribute">type</span>: <span class="string">'COMPLETE_TODO'</span>,</span><br><span class="line">  index: <span class="number">1</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"><span class="selector-tag">store</span><span class="selector-class">.dispatch</span>(&#123;</span><br><span class="line">  <span class="attribute">type</span>: <span class="string">'SET_VISIBILITY_FILTER'</span>,</span><br><span class="line">  filter: <span class="string">'SHOW_COMPLETED'</span></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="/2015/11/05/redux/redux框架-介绍-动机/" itemprop="url">
                  redux框架-介绍(动机)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-11-05T13:09:21+08:00" content="2015-11-05">
              2015-11-05
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/redux/" itemprop="url" rel="index">
                    <span itemprop="name">redux</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/11/05/redux/redux框架-介绍-动机/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/11/05/redux/redux框架-介绍-动机/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h2 id="为何而来"><a href="#为何而来" class="headerlink" title="为何而来"></a>为何而来</h2><p>随着 JavaScript 单页应用开发日趋复杂，JavaScript 需要管理比任何时候都多的 state （状态）。<br>这些 state 可能包括服务器响应、缓存数据、本地生成尚未持久化到服务器的数据，也包括 UI 状态，<br>如激活的路由，被选中的标签，是否显示加载中动效或者分页器等等。</p> <p>管理不断变化的 state 非常难。如果一个 model 的变化会引起另一个 model 变化，那么当 view 变化时，<br>就可能引起对应 model 以及另一个 model 的变化，依次地，可能会引起另一个 view 的变化。直至你搞不清楚到底发生了什么。<br>state 在什么时候，为什么，如何变化已然不受控制。 当系统变得错综复杂的时候，想重现问题或者添加新功能就会变得举步维艰。</p> <p>如果这还不够糟糕，考虑一些来自前端开发领域的新需求，如更新调优、服务端渲染、路由跳转前请求数据等等。<br>我们前端开发者正在经受前所未有的复杂性，我们是时候该放弃了吗？</p> <p>这里的复杂性很大程度上来自于：我们总是将两个难以厘清的概念混在一起：变化和异步。<br>我称它们为曼妥思糖与可乐。如果把二者都分开，能做的很好，但混到一起，就变得一团糟。<br>一些库如 React 试图在视图层禁止异步和直接操作 DOM 来解决这个问题。<br>美中不足的是，React 依旧把处理 state 中数据的问题留给了你自己。</p> <p>跟随 Flux、CQRS 和 Event Sourcing 的脚步，通过限制更新发生的时间和方式，<br>Redux 试图让 state 的变化变得可预测，而这些限制条件反映在 Redux 的 三大原则中。</p>
            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="/2015/11/03/服务器端世界时间-UTC-转换客户端时区时间/" itemprop="url">
                  服务器端世界时间(UTC)转换客户端时区时间
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-11-03T07:47:56+08:00" content="2015-11-03">
              2015-11-03
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/node/" itemprop="url" rel="index">
                    <span itemprop="name">node</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/11/03/服务器端世界时间-UTC-转换客户端时区时间/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/11/03/服务器端世界时间-UTC-转换客户端时区时间/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <p>最近在做项目的时候，一直出现 客户端时间不对的问题,鉴于顺应 上个前端开发的布道，在设置时间方面，也一直按照以往的惯例.<br>由于时间是海外客户，在取服务器时间的接口上，总是比北京时间提早8小时，于是希望服务器接口返回的时间是格林威治时间，<br>根据客户端的时区转换时间。</p> <blockquote> <p>gg接口<br>GetDateTimeUtc 返回UTC标准时间毫秒<br>GetDateTimeStamp 返回标准UTC时间戳</p> <p>##　服务接口返回格林威治时间</p> </blockquote> <figure class="highlight accesslog"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$.ajax(&#123;</span><br><span class="line">    type: <span class="string">"<span class="keyword">POST</span>"</span>,</span><br><span class="line">    url: <span class="string">"/App_Services/wsDefault.asmx/GetDateTimeStamp"</span>,</span><br><span class="line">    dataType: <span class="string">"json"</span>,</span><br><span class="line">    contentType: <span class="string">"application/json;utf-8"</span>,</span><br><span class="line">    timeout: <span class="number">10000</span>,</span><br><span class="line">    error: function () &#123; &#125;,</span><br><span class="line">    success: function (msg) &#123;</span><br><span class="line">        if (msg)</span><br><span class="line">            ajaxInit(parseFloat(msg.d));</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure> <h2 id="根据客户端的时区获取时差"><a href="#根据客户端的时区获取时差" class="headerlink" title="根据客户端的时区获取时差"></a>根据客户端的时区获取时差</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">clientTimeZoneT</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">//获得时区偏移量</span></span><br><span class="line">    <span class="keyword">var</span> timeOffset = <span class="keyword">new</span> <span class="built_in">Date</span>().getTimezoneOffset();</span><br><span class="line">    <span class="comment">//获得时区小时偏移基数</span></span><br><span class="line">    <span class="keyword">var</span> hour = <span class="built_in">parseInt</span>(timeOffset / <span class="number">60</span>);</span><br><span class="line">    <span class="comment">//获得时区分钟偏移基数</span></span><br><span class="line">    <span class="keyword">var</span> munite = timeOffset % <span class="number">60</span>;</span><br><span class="line">    <span class="keyword">var</span> prefix = <span class="string">"-"</span>;</span><br><span class="line">    <span class="keyword">if</span> (hour &lt; <span class="number">0</span> || munite &lt; <span class="number">0</span>) &#123;</span><br><span class="line">        prefix = <span class="string">"+"</span>;</span><br><span class="line">        hour = -hour;</span><br><span class="line">        <span class="keyword">if</span> (munite &lt; <span class="number">0</span>) &#123;</span><br><span class="line">            munite = -munite;</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">    hour += <span class="string">" "</span>;</span><br><span class="line">    munite += <span class="string">" "</span>;</span><br><span class="line">    <span class="keyword">if</span> (hour.length == <span class="number">2</span>) &#123;</span><br><span class="line">        hour = <span class="string">"0"</span> + hour;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">if</span> (munite.length == <span class="number">2</span>) &#123;</span><br><span class="line">        munite = <span class="string">"0"</span> + munite;</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">var</span> TimeZone = prefix + hour + munite;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">var</span> TimeZoneJ = &#123;</span><br><span class="line">        TimeZone: TimeZone,</span><br><span class="line">        Minute:timeOffset,</span><br><span class="line">        millisecond: -(timeOffset*<span class="number">60</span>*<span class="number">1000</span>)</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">    <span class="keyword">return</span> TimeZoneJ;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>clientTimeZoneT 函数 返回一个 json 对象<br><code>TimeZone</code> 时区差<br><code>Minute</code> 相差分钟数<br><code>millisecond</code> 毫秒数 ：为了和服务器返回的时间做对应客户端时间</p> <h2 id="JavaScript-getTimezoneOffset-方法"><a href="#JavaScript-getTimezoneOffset-方法" class="headerlink" title="JavaScript getTimezoneOffset() 方法"></a>JavaScript getTimezoneOffset() 方法</h2><p>返回格林威治时间和本地时间之间的时差：</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> d = <span class="keyword">new</span> <span class="built_in">Date</span>()</span><br><span class="line"><span class="keyword">var</span> n = d.getTimezoneOffset();</span><br></pre></td></tr></table></figure> <p>n 输出结果:</p> <figure class="highlight diff"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="deletion">-480</span></span><br></pre></td></tr></table></figure> <h2 id="定义和用法"><a href="#定义和用法" class="headerlink" title="定义和用法"></a>定义和用法</h2><p>getTimezoneOffset() 方法可返回格林威治时间和本地时间之间的时差，以分钟为单位。<br>例如，如果时区为 GMT+2, 将返回-120 。<br>注意： 由于使用夏令时的惯例，该方法的返回值不是一个常量。<br>提示： 协调世界时，又称世界统一时间，世界标准时间，国际协调时间，简称UTC（Universal Coordinated Time）。<br>注意： UTC 时间即是 GMT（格林尼治） 时间。</p> <h2 id="返回值"><a href="#返回值" class="headerlink" title="返回值"></a>返回值</h2><p>Number : 本地时间与 GMT 时间之间的时间差，以分钟为单位。</p> <h2 id="最终方案"><a href="#最终方案" class="headerlink" title="最终方案"></a>最终方案</h2><p>选择了 GetDateTimeStamp 返回标准UTC时间戳</p> <p>遇到的坑 是 <code>GetDateTimeStamp</code> 给我返回的是 10 位数的 时间戳 哈哈 ，所以需要给返回的值 * 1000</p> <p>可以看到一下代码 返回的时间戳 * 1000 后在交给 js 处理。</p> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">$.ajax(&#123;</span><br><span class="line">    type: <span class="string">"POST"</span>,</span><br><span class="line">    url: <span class="string">"/App_Services/wsDefault.asmx/GetDateTimeStamp"</span>,</span><br><span class="line">    dataType: <span class="string">"json"</span>,</span><br><span class="line">    contentType: <span class="string">"application/json;utf-8"</span>,</span><br><span class="line">    timeout: <span class="number">10000</span>,</span><br><span class="line">    error: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123; &#125;,</span><br><span class="line">    success: <span class="function"><span class="keyword">function</span> (<span class="params">msg</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">var</span> millisecond = <span class="built_in">parseInt</span>(clientTimeZoneT().millisecond);</span><br><span class="line">        <span class="keyword">var</span> HDateTime = <span class="built_in">parseFloat</span>(msg.d * <span class="number">1000</span>);     </span><br><span class="line">        <span class="keyword">if</span> (msg)</span><br><span class="line">            ajaxInit(HDateTime);</span><br><span class="line">    &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure> <hr>
            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="/2015/10/29/strongloop/node-js框架StrongLoop一步步搭建-第六节/" itemprop="url">
                  node.js框架StrongLoop一步步搭建 第六节 (loopback 插入数据库(mongodb))
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-10-29T16:10:00+08:00" content="2015-10-29">
              2015-10-29
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/node/" itemprop="url" rel="index">
                    <span itemprop="name">node</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/10/29/strongloop/node-js框架StrongLoop一步步搭建-第六节/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/10/29/strongloop/node-js框架StrongLoop一步步搭建-第六节/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      
        <div class="post-gallery" itemscope itemtype="http://schema.org/ImageGallery">
          
          
            <div class="post-gallery-row">
              <a class="post-gallery-img fancybox"
                 href="http://zanjs.b0.upaiyun.com/image/3/a0/30b4cfec7a5c0e547153d0ac560e2.png" rel="gallery_cioo3984e003l1r55x99c9fx3"
                 itemscope itemtype="http://schema.org/ImageObject" itemprop="url">
                <img src="http://zanjs.b0.upaiyun.com/image/3/a0/30b4cfec7a5c0e547153d0ac560e2.png" itemprop="contentUrl"/>
              </a>
            
          

          
          </div>
        </div>
      

      
        
          <span itemprop="articleBody">
            
              <h2 id="loopback-插入数据库"><a href="#loopback-插入数据库" class="headerlink" title="loopback 插入数据库"></a>loopback 插入数据库</h2><blockquote> <p>mongodb 篇</p> </blockquote> <p>上几节相信大家的项目都可以运行起来了,下面就开始 玩玩 mongodb 这个家伙吧</p> <p>在玩之前希望测试一下是否已经 连接到 <code>mongodb</code></p> <p> 可以登录 启动 StrongLoop 的 api 平台</p> <figure class="highlight elixir"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="variable">$ </span>slc arc</span><br></pre></td></tr></table></figure> <p> <img src="http://zanjs.b0.upaiyun.com/image/9/6c/b4c228b5d0bb089ad8f83cbfbae94.png" alt="StrongLoop api 平台"></p> <blockquote> <p>点击 大大的按钮 看到 Success 就正常已经正常连接到 mongodb 了</p> </blockquote> <h3 id="配置-datasources-json-内容如下"><a href="#配置-datasources-json-内容如下" class="headerlink" title="配置 datasources.json  内容如下"></a>配置 datasources.json 内容如下</h3><blockquote> <p>根据您 mongodb 的 配置 填入</p> </blockquote> <figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"db"</span>: &#123;</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"db"</span>,</span><br><span class="line">    <span class="attr">"connector"</span>: <span class="string">"memory"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"mongodb"</span>: &#123;</span><br><span class="line">    <span class="attr">"host"</span>: <span class="string">"127.0.0.1"</span>,</span><br><span class="line">    <span class="attr">"port"</span>: <span class="number">27017</span>,</span><br><span class="line">    <span class="attr">"password"</span>: <span class="string">""</span>,</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"mongodb"</span>,</span><br><span class="line">    <span class="attr">"connector"</span>: <span class="string">"mongodb"</span>,</span><br><span class="line">    <span class="attr">"url"</span>: <span class="string">"mongodb://localhost:27017/panli-auth"</span>,</span><br><span class="line">    <span class="attr">"user"</span>: <span class="string">""</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <h3 id="配置-model-config-json"><a href="#配置-model-config-json" class="headerlink" title="配置 model-config.json"></a>配置 model-config.json</h3><blockquote> <p>这里我吧 <code>dataSource</code> 都改成了 ‘mongodb’ </p> <p>mongodb 的数据源 在 datasources.json 的文件里配置好了 上面已经配置了</p> </blockquote> <figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"_meta"</span>: &#123;</span><br><span class="line">    <span class="attr">"sources"</span>: [</span><br><span class="line">      <span class="string">"loopback/common/models"</span>,</span><br><span class="line">      <span class="string">"loopback/server/models"</span>,</span><br><span class="line">      <span class="string">"../common/models"</span>,</span><br><span class="line">      <span class="string">"./models"</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">"mixins"</span>: [</span><br><span class="line">      <span class="string">"loopback/common/mixins"</span>,</span><br><span class="line">      <span class="string">"loopback/server/mixins"</span>,</span><br><span class="line">      <span class="string">"../common/mixins"</span>,</span><br><span class="line">      <span class="string">"./mixins"</span></span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"AccessToken"</span>: &#123;</span><br><span class="line">    <span class="attr">"dataSource"</span>: <span class="string">"mongodb"</span>,</span><br><span class="line">    <span class="attr">"public"</span>: <span class="literal">false</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"ACL"</span>: &#123;</span><br><span class="line">    <span class="attr">"dataSource"</span>: <span class="string">"mongodb"</span>,</span><br><span class="line">    <span class="attr">"public"</span>: <span class="literal">false</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"RoleMapping"</span>: &#123;</span><br><span class="line">    <span class="attr">"dataSource"</span>: <span class="string">"mongodb"</span>,</span><br><span class="line">    <span class="attr">"public"</span>: <span class="literal">false</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"Role"</span>: &#123;</span><br><span class="line">    <span class="attr">"dataSource"</span>: <span class="string">"mongodb"</span>,</span><br><span class="line">    <span class="attr">"public"</span>: <span class="literal">false</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"PanUser"</span>: &#123;</span><br><span class="line">    <span class="attr">"dataSource"</span>: <span class="string">"mongodb"</span>,</span><br><span class="line">    <span class="attr">"public"</span>: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <h3 id="scl-run-运行应用"><a href="#scl-run-运行应用" class="headerlink" title="scl run 运行应用"></a>scl run 运行应用</h3><figure class="highlight groovy"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="string">E:</span>\zan\www\strongloop\loopback\panli-auth&gt;slc run</span><br><span class="line">INFO strong-agent v2<span class="number">.0</span><span class="number">.2</span> profiling app <span class="string">'panli-auth'</span> pid <span class="string">'7752'</span></span><br><span class="line">INFO strong-agent[<span class="number">7752</span>] started profiling agent</span><br><span class="line">INFO supervisor reporting metrics to `<span class="string">internal:</span>`</span><br><span class="line">supervisor running without clustering (unsupervised)</span><br><span class="line"><span class="string">Swagger:</span> skipping unknown type <span class="string">"ObjectID"</span>.</span><br><span class="line">Web server listening <span class="string">at:</span> <span class="string">http:</span><span class="comment">//localhost:3000</span></span><br><span class="line">Browse your REST API at <span class="string">http:</span><span class="comment">//localhost:3000/explorer</span></span><br></pre></td></tr></table></figure> <p>浏览器打开 <a href="http://localhost:3000/explorer" target="_blank" rel="external">http://localhost:3000/explorer</a></p> <p>在这里 我们可以测试接口的数据</p> <p>下面演示一下</p> <p><img src="http://zanjs.b0.upaiyun.com/image/f/0c/f07b3315a75d8f13ff07e21b6dd8b.gif" alt="api gif"></p> <blockquote> <p>上面是演示注册用户的api 接口 post 提交 <a href="http://localhost:3000/api/users" target="_blank" rel="external">http://localhost:3000/api/users</a></p> </blockquote> <p>在文本框内输入三个必填项 username ， email 和 password</p> <figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line"><span class="attr">"username"</span>:<span class="string">"za2"</span>,</span><br><span class="line"><span class="attr">"email"</span>:<span class="string">"zz@z2.com"</span>,</span><br><span class="line"><span class="attr">"password"</span>:<span class="string">"qq123"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>提交后 在下面的 Response Body 可以看到 我们注册的用户信息了</p> <figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"username"</span>: <span class="string">"za2"</span>,</span><br><span class="line">  <span class="attr">"email"</span>: <span class="string">"zz@z2.com"</span>,</span><br><span class="line">  <span class="attr">"id"</span>: <span class="string">"5631dc4d59ab85481e474aec"</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>看到 id 的键值 就可以知道 他插入到了 mongodb 了</p> <p>我还是不相信我的眼睛 ， 吓得我 跑到 mongodb 瞧一瞧 嘻嘻！</p> <figure class="highlight perl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line">&gt; show dbs</span><br><span class="line"><span class="keyword">local</span>       <span class="number">0</span>.<span class="number">07</span>8GB</span><br><span class="line">panli-auth  <span class="number">0</span>.<span class="number">07</span>8GB</span><br><span class="line">test        <span class="number">0</span>.<span class="number">07</span>8GB</span><br><span class="line">&gt; <span class="keyword">use</span> panli-auth</span><br><span class="line">switched to db panli-auth</span><br><span class="line">&gt; show tables</span><br><span class="line">PanUser</span><br><span class="line">system.indexes</span><br><span class="line">&gt; show collections</span><br><span class="line">PanUser</span><br><span class="line">system.indexes</span><br><span class="line">&gt; db.PanUser.find()</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"5631d38859ab85481e474aeb"</span>), <span class="string">"username"</span> : <span class="string">"za"</span>, <span class="string">"password"</span> :</span><br><span class="line"><span class="string">"$2a$10$OnuNv/YTPSYzYUi9S9UJ3eArmRmZQbRCyBnqt6xxozYEjSMIE2PTK"</span>, <span class="string">"email"</span> : <span class="string">"zz@z.</span><br><span class="line">com"</span> &#125;</span><br><span class="line">&#123; <span class="string">"_id"</span> : ObjectId(<span class="string">"5631dc4d59ab85481e474aec"</span>), <span class="string">"username"</span> : <span class="string">"za2"</span>, <span class="string">"password"</span> :</span><br><span class="line"> <span class="string">"$2a$10$9q5X4y570Ti3SdfMg4ANr.dHOdjZpPW3.JOxE5GB2U6t9XCngZyVq"</span>, <span class="string">"email"</span> : <span class="string">"zz@z</span><br><span class="line">2.com"</span> &#125;</span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure> <p>可以看到 数据以及躺在 mongodb 里啦</p> <p>如果有不对的地方，请大神 指错， 我也是一边学习 一边 写的</p>
            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="/2015/10/29/strongloop/node-js框架StrongLoop一步步搭建-第五节/" itemprop="url">
                  node.js框架StrongLoop一步步搭建 第五节 (LoopBack 模型(model)属性添加)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-10-29T15:10:28+08:00" content="2015-10-29">
              2015-10-29
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/node/" itemprop="url" rel="index">
                    <span itemprop="name">node</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/10/29/strongloop/node-js框架StrongLoop一步步搭建-第五节/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/10/29/strongloop/node-js框架StrongLoop一步步搭建-第五节/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      
        <div class="post-gallery" itemscope itemtype="http://schema.org/ImageGallery">
          
          
            <div class="post-gallery-row">
              <a class="post-gallery-img fancybox"
                 href="http://zanjs.b0.upaiyun.com/image/3/a0/30b4cfec7a5c0e547153d0ac560e2.png" rel="gallery_cioo3984d003i1r55ctbwxso2"
                 itemscope itemtype="http://schema.org/ImageObject" itemprop="url">
                <img src="http://zanjs.b0.upaiyun.com/image/3/a0/30b4cfec7a5c0e547153d0ac560e2.png" itemprop="contentUrl"/>
              </a>
            
          

          
          </div>
        </div>
      

      
        
          <span itemprop="articleBody">
            
              <h2 id="模型-model-添加新属性"><a href="#模型-model-添加新属性" class="headerlink" title="模型(model)添加新属性"></a>模型(model)添加新属性</h2><h3 id="命令行方式"><a href="#命令行方式" class="headerlink" title="命令行方式"></a>命令行方式</h3><ul> <li>cd 到项目根目录下 <code>slc loopback:property</code></li> </ul> <p>选择属性添加到哪个模型里 - 我选择了上节创建的 <code>PanUser</code> 模型</p> <figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">E:\zan\www\strongloop\loopback\panli-auth&gt;slc loopback:<span class="keyword">property</span><span class="title"></span><br><span class="line"></span>? Select the model:</span><br><span class="line">  Change</span><br><span class="line">  Checkpoint</span><br><span class="line">  Email</span><br><span class="line">&gt; PanUser</span><br><span class="line">  <span class="keyword">Role</span></span><br><span class="line">  <span class="title">RoleMapping</span></span><br><span class="line">  Scope</span><br><span class="line">(Move up <span class="keyword">and</span> down to reveal more choices)</span><br></pre></td></tr></table></figure> <p>要添加属性的名称 输入 <code>age</code> 选择 number 字段类型</p> <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">? <span class="keyword">Select</span> the <span class="keyword">model</span>: PanUser</span><br><span class="line">? Enter the property <span class="keyword">name</span>: age</span><br><span class="line">? Property <span class="keyword">type</span>:</span><br><span class="line">  <span class="keyword">string</span></span><br><span class="line">&gt; <span class="built_in">number</span></span><br><span class="line">  <span class="built_in">boolean</span></span><br><span class="line">  <span class="keyword">object</span></span><br><span class="line">  <span class="built_in">array</span></span><br><span class="line">  <span class="built_in">date</span></span><br><span class="line">  buffer</span><br><span class="line">(<span class="keyword">Move</span> up <span class="keyword">and</span> down <span class="keyword">to</span> reveal more choices)</span><br></pre></td></tr></table></figure> <p>是否必填 输入 N</p> <figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">? Select the model: PanUser</span><br><span class="line">? Enter the <span class="keyword">property</span><span class="title"> name:</span> age</span><br><span class="line">? <span class="keyword">Property</span><span class="title"> type:</span> <span class="keyword">number</span></span><br><span class="line">? Required? No</span><br></pre></td></tr></table></figure> <p>到此 为 模型(model)添加新属性 结束</p> <h3 id="web在线网页方式"><a href="#web在线网页方式" class="headerlink" title="web在线网页方式"></a>web在线网页方式</h3><p>忽视吧 哈哈…</p> <p>StrongLoop API平台 傻瓜式操作 </p> <blockquote> <p>如果有不对的地方，请大神 指错， 我也是一边学习 一边 写的</p> </blockquote>
            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="/2015/10/29/strongloop/node-js框架StrongLoop一步步搭建-第四节/" itemprop="url">
                  node.js框架StrongLoop一步步搭建 第四节 (LoopBack 模型(model)的创建)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-10-29T14:15:11+08:00" content="2015-10-29">
              2015-10-29
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/node/" itemprop="url" rel="index">
                    <span itemprop="name">node</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/10/29/strongloop/node-js框架StrongLoop一步步搭建-第四节/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/10/29/strongloop/node-js框架StrongLoop一步步搭建-第四节/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      
        <div class="post-gallery" itemscope itemtype="http://schema.org/ImageGallery">
          
          
            <div class="post-gallery-row">
              <a class="post-gallery-img fancybox"
                 href="http://zanjs.b0.upaiyun.com/image/3/a0/30b4cfec7a5c0e547153d0ac560e2.png" rel="gallery_cioo3984g003p1r55uxwu1qz5"
                 itemscope itemtype="http://schema.org/ImageObject" itemprop="url">
                <img src="http://zanjs.b0.upaiyun.com/image/3/a0/30b4cfec7a5c0e547153d0ac560e2.png" itemprop="contentUrl"/>
              </a>
            
          

          
          </div>
        </div>
      

      
        
          <span itemprop="articleBody">
            
              <h2 id="创建新模型-model"><a href="#创建新模型-model" class="headerlink" title="创建新模型(model)"></a>创建新模型(model)</h2><p>如果您还在停留在手工创建 模型(model)，是不是感觉很不爽 ！<br>是的，<code>StrongLoop</code> 给我们带来的更加规范的模式！下面进入正题</p> <h3 id="命令行方式"><a href="#命令行方式" class="headerlink" title="命令行方式"></a>命令行方式</h3><ul> <li>cd 到项目根目录下 <code>slc loopback:model</code></li> </ul> <blockquote> <p>接下来会进入交互模式</p> </blockquote> <p>这里是输入模型名称 我输入了 <code>PanUser</code> (我理解为数据库的表名！！ 惭愧了 (<em>^__^</em>) 嘻嘻……)</p> <figure class="highlight applescript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">? Enter <span class="keyword">the</span> model <span class="built_in">name</span>: PanUser</span><br></pre></td></tr></table></figure> <p>下面选择 模型(model) 的 存放数据源， 由于在前面我已经创建了 mongodb 的数据源 (为数据持久化)</p> <p>如果您还没有创建数据源的话，可能选项只有 一个 <code>db (memory)</code> 存放在内存中</p> <p>这里我选择了 mongodb (mongodb) 第二个选择</p> <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">? <span class="keyword">Select</span> the <span class="keyword">data</span>-<span class="keyword">source</span> <span class="keyword">to</span> attach PanUser <span class="keyword">to</span>:</span><br><span class="line">  (<span class="keyword">no</span> <span class="keyword">data</span>-<span class="keyword">source</span>)</span><br><span class="line">&gt; db (<span class="keyword">memory</span>)</span><br><span class="line">  mongodb (mongodb)</span><br></pre></td></tr></table></figure> <p>接下来我们要选择 模型继承类 ，这里我们想建立一个用户系统，<br><code>PanUser</code> 这个模型 继续 loopback 自身内建的 <code>User</code> 类<br>一直下拉 选择 <code>User</code> 回车</p> <figure class="highlight vhdl"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line">? Enter the model name: PanUser</span><br><span class="line">? <span class="keyword">Select</span> the data-source <span class="keyword">to</span> attach PanUser <span class="keyword">to</span>: mongodb (mongodb)</span><br><span class="line">? <span class="keyword">Select</span> model<span class="symbol">'s</span> base class (<span class="keyword">Use</span> arrow keys)</span><br><span class="line">  Model</span><br><span class="line">&gt; PersistedModel</span><br><span class="line">  ACL</span><br><span class="line">  AccessToken</span><br><span class="line">  Application</span><br><span class="line">  Change</span><br><span class="line">  Checkpoint</span><br><span class="line">(Move up <span class="keyword">and</span> down <span class="keyword">to</span> reveal more choices)</span><br></pre></td></tr></table></figure> <p>回车后我们看到了 如下</p> <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">? Enter the model name: PanUser</span><br><span class="line">? <span class="keyword">Select</span> the <span class="keyword">data</span>-<span class="keyword">source</span> <span class="keyword">to</span> attach PanUser <span class="keyword">to</span>: mongodb (mongodb)</span><br><span class="line">? <span class="keyword">Select</span> <span class="keyword">model</span><span class="string">'s base class User</span><br><span class="line">? Expose PanUser via the REST API? (Y/n) -- Y键回车 暴露这个接口</span></span><br></pre></td></tr></table></figure> <p>下面填写 REST 接口 的 url 地址 – 我填写了 users<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">? Enter the model name: PanUser</span><br><span class="line">? <span class="keyword">Select</span> the <span class="keyword">data</span>-<span class="keyword">source</span> <span class="keyword">to</span> attach PanUser <span class="keyword">to</span>: mongodb (mongodb)</span><br><span class="line">? <span class="keyword">Select</span> <span class="keyword">model</span><span class="string">'s base class User</span><br><span class="line">? Expose PanUser via the REST API? Yes</span><br><span class="line">? Custom plural form (used to build REST URL): users</span></span><br></pre></td></tr></table></figure></p> <p>主要配置都完成了 当输入完 REST 接口 的 url 地址 回车后，<br>就该添加字段了 ,由于 <code>PanUser</code> 已经继承了 loopback 的 <code>User</code><br>所以 一些该有的字段 都已经有了 例如 username email password 等等<br>这里我输入了 <code>fullname</code></p> <figure class="highlight vbnet"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">E:\zan\www\strongloop\loopback\panli-auth&gt;slc loopback:model</span><br><span class="line">? Enter the model name: PanUser</span><br><span class="line">? <span class="keyword">Select</span> the data-source <span class="keyword">to</span> attach PanUser <span class="keyword">to</span>: mongodb (mongodb)</span><br><span class="line">? <span class="keyword">Select</span> model<span class="comment">'s base class User</span></span><br><span class="line">? Expose PanUser via the REST API? Yes</span><br><span class="line">? <span class="keyword">Custom</span> plural form (used <span class="keyword">to</span> build REST URL): users</span><br><span class="line"><span class="keyword">Let</span><span class="comment">'s add some PanUser properties now.</span></span><br><span class="line"></span><br><span class="line">Enter an empty <span class="keyword">property</span> name <span class="keyword">when</span> done.</span><br><span class="line">? <span class="keyword">Property</span> name: fullname</span><br></pre></td></tr></table></figure> <p>选择 字段类型 ‘string’</p> <figure class="highlight smali"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">Enter an empty property name when done.</span><br><span class="line">? Property name: fullname</span><br><span class="line">(!) generator<span class="comment">#invoke() is deprecated. Use generator#composeWith() - see http:</span></span><br><span class="line">eoman.io/authoring/composability.html</span><br><span class="line">  <span class="built_in"> invoke </span>  loopback:property</span><br><span class="line">? Property type: (Use arrow keys)</span><br><span class="line">&gt; string</span><br><span class="line">  number</span><br><span class="line">  boolean</span><br><span class="line">  object</span><br><span class="line"> <span class="built_in"> array</span><br><span class="line"></span>  date</span><br><span class="line">  buffer</span><br><span class="line">(Move up<span class="built_in"> and </span>down to reveal more choices)</span><br></pre></td></tr></table></figure> <p>是否必填 no</p> <figure class="highlight crmsh"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">? <span class="keyword">Property</span><span class="title"> type:</span> <span class="keyword">string</span></span><br><span class="line">? Required? No</span><br><span class="line"></span><br><span class="line">Let's add another PanUser <span class="keyword">property</span>.<span class="title"></span><br><span class="line"></span>Enter an empty <span class="keyword">property</span><span class="title"> </span>name when done.</span><br><span class="line">? <span class="keyword">Property</span><span class="title"> name:</span></span><br></pre></td></tr></table></figure> <p>接下来会继续增加字段 这里就不增加了 按下 ctrl+c 退出交互</p> <p>有人会问 以上命令都做了哪些 设置呢？</p> <p>在项目根目录下 多了 一个 common 文件夹 结构如下</p> <p><img src="http://zanjs.b0.upaiyun.com/image/6/bd/d24478084298afc75a0ece6bd7712.png" alt="common"></p> <p>可以看到 models 增加了 2个文件 <code>pan-user.js</code> 和 <code>pan-user.json</code></p> <p>pan-user.js 可以写入我们的业务逻辑</p> <p>pan-user.json 是模型配置参数</p> <p>还有一个地方做了修改 在 server/model-config.json 下 可以看到 增加了如下配置</p> <figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"_meta"</span>: &#123;</span><br><span class="line">    <span class="attr">"sources"</span>: [</span><br><span class="line">      <span class="string">"loopback/common/models"</span>,</span><br><span class="line">      <span class="string">"loopback/server/models"</span>,</span><br><span class="line">      <span class="string">"../common/models"</span>,</span><br><span class="line">      <span class="string">"./models"</span></span><br><span class="line">    ],</span><br><span class="line">    <span class="attr">"mixins"</span>: [</span><br><span class="line">      <span class="string">"loopback/common/mixins"</span>,</span><br><span class="line">      <span class="string">"loopback/server/mixins"</span>,</span><br><span class="line">      <span class="string">"../common/mixins"</span>,</span><br><span class="line">      <span class="string">"./mixins"</span></span><br><span class="line">    ]</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"User"</span>: &#123;</span><br><span class="line">    <span class="attr">"dataSource"</span>: <span class="string">"db"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"AccessToken"</span>: &#123;</span><br><span class="line">    <span class="attr">"dataSource"</span>: <span class="string">"db"</span>,</span><br><span class="line">    <span class="attr">"public"</span>: <span class="literal">false</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"ACL"</span>: &#123;</span><br><span class="line">    <span class="attr">"dataSource"</span>: <span class="string">"db"</span>,</span><br><span class="line">    <span class="attr">"public"</span>: <span class="literal">false</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"RoleMapping"</span>: &#123;</span><br><span class="line">    <span class="attr">"dataSource"</span>: <span class="string">"db"</span>,</span><br><span class="line">    <span class="attr">"public"</span>: <span class="literal">false</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"Role"</span>: &#123;</span><br><span class="line">    <span class="attr">"dataSource"</span>: <span class="string">"db"</span>,</span><br><span class="line">    <span class="attr">"public"</span>: <span class="literal">false</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"PanUser"</span>: &#123;</span><br><span class="line">    <span class="attr">"dataSource"</span>: <span class="string">"mongodb"</span>,</span><br><span class="line">    <span class="attr">"public"</span>: <span class="literal">true</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>在最后面 增加 了 <code>PanUser</code>;<br>这个在 我们手工 写入 <code>model</code> 时 是不能忘记的</p> <h3 id="web在线网页方式"><a href="#web在线网页方式" class="headerlink" title="web在线网页方式"></a>web在线网页方式</h3><blockquote> <p>如果您看过了 第三季的 话， 我想这里就很简单了<br>如果您没有看,可以看一下上一节的 操作</p> </blockquote> <p><img src="http://zanjs.b0.upaiyun.com/image/2/a5/1d82a29ecfb182ac919b8d578e07d.png" alt="model"></p> <p>可以看到 这里已经显示了 刚才 我们用命令行的方式 添加的 <code>PanUser</code></p> <p>这里都是傻瓜式操作了，大家自己玩玩吧！ <code>O(∩_∩)O哈哈</code></p> <p>如果有不对的地方，请大神 指错， 我也是一边学习 一边 写的</p>
            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="/2015/10/29/strongloop/node-js框架StrongLoop一步步搭建-第三节/" itemprop="url">
                  node.js框架StrongLoop一步步搭建 第三节 (LoopBack 数据库配置连接)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-10-29T11:21:14+08:00" content="2015-10-29">
              2015-10-29
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/node/" itemprop="url" rel="index">
                    <span itemprop="name">node</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/10/29/strongloop/node-js框架StrongLoop一步步搭建-第三节/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/10/29/strongloop/node-js框架StrongLoop一步步搭建-第三节/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      
        <div class="post-gallery" itemscope itemtype="http://schema.org/ImageGallery">
          
          
            <div class="post-gallery-row">
              <a class="post-gallery-img fancybox"
                 href="http://zanjs.b0.upaiyun.com/image/3/a0/30b4cfec7a5c0e547153d0ac560e2.png" rel="gallery_cioo39849003a1r55y5mztv94"
                 itemscope itemtype="http://schema.org/ImageObject" itemprop="url">
                <img src="http://zanjs.b0.upaiyun.com/image/3/a0/30b4cfec7a5c0e547153d0ac560e2.png" itemprop="contentUrl"/>
              </a>
            
          

          
          </div>
        </div>
      

      
        
          <span itemprop="articleBody">
            
              <h2 id="配置数据库连接"><a href="#配置数据库连接" class="headerlink" title="配置数据库连接"></a>配置数据库连接</h2><p>Loopback 提供了 多种连接数据库的 方案 一下分别是 <code>命令行</code> 和 StrongLoop 为我们提供的管理系统</p> <h3 id="命令行方式"><a href="#命令行方式" class="headerlink" title="命令行方式"></a>命令行方式</h3><ul> <li>cd 到项目根目录下 <code>slc loopback:datasource</code></li> </ul> <blockquote> <p>接下来会进入交互模式</p> </blockquote> <figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">? Enter <span class="keyword">the</span> data-source name: mongodb</span><br><span class="line">? Select <span class="keyword">the</span> connector <span class="keyword">for</span> mongodb: MongoDB (supported <span class="keyword">by</span> StrongLoop)</span><br></pre></td></tr></table></figure> <p>这里我 选了 <code>mongodb</code></p> <p>下面是选择界面</p> <figure class="highlight armasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">? Enter the <span class="meta">data</span>-source name: mysql</span><br><span class="line">? <span class="keyword">Select </span>the connector for mysql:</span><br><span class="line">  In-memory db (supported <span class="keyword">by </span><span class="keyword">StrongLoop)</span><br><span class="line"></span>  Email (supported <span class="keyword">by </span><span class="keyword">StrongLoop)</span><br><span class="line"></span>&gt; MySQL (supported <span class="keyword">by </span><span class="keyword">StrongLoop)</span><br><span class="line"></span>  PostgreSQL (supported <span class="keyword">by </span><span class="keyword">StrongLoop)</span><br><span class="line"></span>  Oracle (supported <span class="keyword">by </span><span class="keyword">StrongLoop)</span><br><span class="line"></span>  Microsoft SQL (supported <span class="keyword">by </span><span class="keyword">StrongLoop)</span><br><span class="line"></span>  MongoDB (supported <span class="keyword">by </span><span class="keyword">StrongLoop)</span><br><span class="line"></span>(<span class="keyword">Move </span>up <span class="keyword">and </span>down to <span class="keyword">reveal </span>more choices)</span><br></pre></td></tr></table></figure> <p>操作后会在项目目录下的 <code>server/datasources.json</code> 文件里增加 我们的 数据源</p> <figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"db"</span>: &#123;</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"db"</span>,</span><br><span class="line">    <span class="attr">"connector"</span>: <span class="string">"memory"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"mongodb"</span>: &#123;</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"mongodb"</span>,</span><br><span class="line">    <span class="attr">"connector"</span>: <span class="string">"mongodb"</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <p>在这里 需要我们手动添加 <code>mongodb</code> 的连接配置信息 加入 host, port, database, username和password等项</p> <figure class="highlight json"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  <span class="attr">"db"</span>: &#123;</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"db"</span>,</span><br><span class="line">    <span class="attr">"connector"</span>: <span class="string">"memory"</span></span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="attr">"mongodb"</span>: &#123;</span><br><span class="line">    <span class="attr">"name"</span>: <span class="string">"mongodb"</span>,</span><br><span class="line">    <span class="attr">"connector"</span>: <span class="string">"mongodb"</span>,</span><br><span class="line">    <span class="attr">"host"</span>: <span class="string">"127.0.0.1"</span>,</span><br><span class="line">    <span class="attr">"database"</span>: <span class="string">"devDB"</span>,</span><br><span class="line">    <span class="attr">"username"</span>: <span class="string">"devUser"</span>,</span><br><span class="line">    <span class="attr">"password"</span>: <span class="string">"devPassword"</span>,</span><br><span class="line">    <span class="attr">"port"</span>: <span class="number">27017</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <h3 id="web在线网页方式"><a href="#web在线网页方式" class="headerlink" title="web在线网页方式"></a>web在线网页方式</h3><blockquote> <p>StrongLoop 为我们提供非常方便的 在线管理您的应用后台</p> </blockquote> <p>如果您是克隆了 同事的项目 请记得 先全局安装 <code>npm i -g strongloop</code></p> <p>到我们的项目根目录下 <code>slc arc</code> 命令</p> <p>会自动打开浏览器进入管理界面</p> <figure class="highlight taggerscript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">E:<span class="symbol">\z</span>an<span class="symbol">\w</span>ww<span class="symbol">\s</span>trongloop<span class="symbol">\l</span>oopback<span class="symbol">\p</span>anli-auth&gt;slc arc</span><br><span class="line">Loading workspace E:<span class="symbol">\z</span>an<span class="symbol">\w</span>ww<span class="symbol">\s</span>trongloop<span class="symbol">\l</span>oopback<span class="symbol">\p</span>anli-auth</span><br><span class="line">StrongLoop Arc is running here: http://localhost:24033/#/</span><br></pre></td></tr></table></figure> <p><img src="http://zanjs.b0.upaiyun.com/image/6/73/d4ad7baca1f78490838e4010815f1.png" alt="loopback login"></p> <p>这里需要到 <a href="https://strongloop.com/register/" target="_blank" rel="external">strongloop</a> 的官网注册一个帐号 才可以登录后台 ，至于为什么，目前还不清楚，很抱歉，哈哈！</p> <p>注册好后 我们输出帐号登录来到了 非常漂亮的后台</p> <p><img src="http://zanjs.b0.upaiyun.com/image/b/a3/73d5f70f710616cbbe6c0216f64db.png" alt="loopback main page"></p> <p>由于刚才敲入的 是 <code>mongodb</code> 的 数据源 所以 在 左侧的 导航 会看到 <code>Data Sources</code> 会有2个数据源<br>第一个 <code>db</code> 表示 内存 一开始项目初始化的时候数据都是存放在 内存中的。<br>第二个 <code>mongodb</code> 是要链接本地mongodb 数据库的 下面是我的配置</p> <p><img src="http://zanjs.b0.upaiyun.com/image/3/83/db52891c31449d0d2c964201150ec.png" alt="mongodb 数据库"></p> <p>点击 <code>Test Connection 按钮</code> 如果出现 绿色 的 <code>Success</code> 提示 说明 连接数据库成功 ，你可以开心的耍了</p> <p>如果有不对的地方，请大神 指错， 我也是一边学习 一边 写的 </p> <p>祝你顺利完成！</p> <p>(<em>^__^</em>) 嘻嘻……</p>
            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="/2015/10/29/strongloop/node-js框架StrongLoop一步步搭建-第二节/" itemprop="url">
                  node.js框架StrongLoop一步步搭建 第二节 (LoopBack 安装数据库)
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-10-29T10:43:08+08:00" content="2015-10-29">
              2015-10-29
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/node/" itemprop="url" rel="index">
                    <span itemprop="name">node</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/10/29/strongloop/node-js框架StrongLoop一步步搭建-第二节/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/10/29/strongloop/node-js框架StrongLoop一步步搭建-第二节/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      
        <div class="post-gallery" itemscope itemtype="http://schema.org/ImageGallery">
          
          
            <div class="post-gallery-row">
              <a class="post-gallery-img fancybox"
                 href="http://zanjs.b0.upaiyun.com/image/3/a0/30b4cfec7a5c0e547153d0ac560e2.png" rel="gallery_cioo3984b003f1r55x5pbol90"
                 itemscope itemtype="http://schema.org/ImageObject" itemprop="url">
                <img src="http://zanjs.b0.upaiyun.com/image/3/a0/30b4cfec7a5c0e547153d0ac560e2.png" itemprop="contentUrl"/>
              </a>
            
          

          
          </div>
        </div>
      

      
        
          <span itemprop="articleBody">
            
              <h2 id="安装数据库驱动"><a href="#安装数据库驱动" class="headerlink" title="安装数据库驱动"></a>安装数据库驱动</h2><p>LoopBack 不是所有的事情都帮你做了，你还需要手动安装一下你需要的数据库</p> <p>目前 LoopBack 支持如下数据库:</p> <p>mongodb<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm <span class="keyword">install</span> loopback-connector-mongodb <span class="comment">--save</span></span><br></pre></td></tr></table></figure></p> <p>出处详情<br><a href="https://docs.strongloop.com/display/public/LB/MongoDB+connector" target="_blank" rel="external">https://docs.strongloop.com/display/public/LB/MongoDB+connector</a></p> <p>mysql<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm <span class="keyword">install</span> loopback-connector-mysql <span class="comment">--save</span></span><br></pre></td></tr></table></figure></p> <p>出处详情<br><a href="https://docs.strongloop.com/display/public/LB/MySQL+connector" target="_blank" rel="external">https://docs.strongloop.com/display/public/LB/MySQL+connector</a></p> <p>oracle<br><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm <span class="keyword">install</span> loopback-connector-<span class="keyword">oracle</span> <span class="comment">--save</span></span><br></pre></td></tr></table></figure></p> <p>出处详情<br><a href="https://docs.strongloop.com/display/public/LB/Oracle+connector" target="_blank" rel="external">https://docs.strongloop.com/display/public/LB/Oracle+connector</a></p> <p>postgresql</p> <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm <span class="keyword">install</span> loopback-connector-postgresql <span class="comment">--save</span></span><br></pre></td></tr></table></figure> <p>出处详情<br><a href="https://docs.strongloop.com/display/public/LB/PostgreSQL+connector" target="_blank" rel="external">https://docs.strongloop.com/display/public/LB/PostgreSQL+connector</a></p> <p>SQL+Server</p> <figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">$ npm <span class="keyword">install</span> loopback-connector-mssql <span class="comment">--save</span></span><br></pre></td></tr></table></figure> <p>出处详情<br><a href="https://docs.strongloop.com/display/public/LB/SQL+Server+connector" target="_blank" rel="external">https://docs.strongloop.com/display/public/LB/SQL+Server+connector</a></p>
            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/3/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><span class="space">&hellip;</span><a class="page-number" href="/page/3/">3</a><span class="page-number current">4</span><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/5/"><i class="fa fa-angle-right"></i></a>
  </nav>



        </div>

        


        

      </div>

      
        
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" src="https://avatars0.githubusercontent.com/u/14232344?v=3&s=200" alt="Julaud" itemprop="image"/>
          <p class="site-author-name" itemprop="name">Julaud</p>
        </div>
        <p class="site-description motion-element" itemprop="description">不折腾，哪来的新技术</p>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">44</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            <a href="/categories">
              <span class="site-state-item-count">18</span>
              <span class="site-state-item-name">分类</span>
              </a>
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">55</span>
              <span class="site-state-item-name">标签</span>
              </a>
          </div>

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
        </div>

      </section>

      

    </div>
  </aside>


      
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="icon-next-heart fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Julaud</span>
</div>




      </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  

  
    

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"panli-gg"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>
    
     


    
  

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.5.2"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.5.2"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
<script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

<script type="text/javascript" src="/js/motion.js?v=0.4.5.2" id="motion.global"></script>


  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  

  <script type="text/javascript" src="/js/bootstrap.js"></script>

  
  

  
  

</body>
</html>
