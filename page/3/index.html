<!doctype html>
<html class="theme-next   use-motion ">
<head>
  <meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>



<meta http-equiv="Cache-Control" content="no-transform" />
<meta http-equiv="Cache-Control" content="no-siteapp" />












  <link href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5" rel="stylesheet" type="text/css"/>




  
    <link href='//fonts.lug.ustc.edu.cn/css?family=Lato:300,400,700,400italic&subset=latin,latin-ext' rel='stylesheet' type='text/css'>
  



<link href="/vendors/font-awesome/css/font-awesome.min.css?v=4.4.0" rel="stylesheet" type="text/css" />

<link href="/css/main.css?v=0.4.5.2" rel="stylesheet" type="text/css" />



  <meta name="description" content="不折腾，哪来的新技术" />




  <meta name="keywords" content="panli, ued" />








  <link rel="shortcut icon" type="image/x-icon" href="/favicon.ico?v=0.4.5.2" />






<meta name="description" content="不折腾，哪来的新技术">
<meta property="og:type" content="website">
<meta property="og:title" content="Panli团队技术博客">
<meta property="og:url" content="http://panli-com.github.io/page/3/index.html">
<meta property="og:site_name" content="Panli团队技术博客">
<meta property="og:description" content="不折腾，哪来的新技术">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Panli团队技术博客">
<meta name="twitter:description" content="不折腾，哪来的新技术">



<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: '',
    sidebar: 'post',
    motion: true
  };
</script>

  <title> Panli团队技术博客 </title>
</head>

<body itemscope itemtype="http://schema.org/WebPage" lang="zh-Hans">

  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->
  






  <div class="container one-column 
   page-home 
">
    <div class="headband"></div>

    <header id="header" class="header" itemscope itemtype="http://schema.org/WPHeader">
      <div class="header-inner"><div class="site-meta ">
  

  <div class="custom-logo-site-title">
    <a href="/"  class="brand" rel="start">
      <span class="logo-line-before"><i></i></span>
      <span class="site-title">Panli团队技术博客</span>
      <span class="logo-line-after"><i></i></span>
    </a>
  </div>
  <p class="site-subtitle">追寻最新技术领域</p>
</div>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<nav class="site-nav">
  

  
    <ul id="menu" class="menu ">
      
        
        <li class="menu-item menu-item-home">
          <a href="/" rel="section">
            
              <i class="menu-item-icon fa fa-home fa-fw"></i> <br />
            
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-categories">
          <a href="/categories" rel="section">
            
              <i class="menu-item-icon fa fa-th fa-fw"></i> <br />
            
            分类
          </a>
        </li>
      
        
        <li class="menu-item menu-item-about">
          <a href="/about" rel="section">
            
              <i class="menu-item-icon fa fa-user fa-fw"></i> <br />
            
            关于
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives" rel="section">
            
              <i class="menu-item-icon fa fa-archive fa-fw"></i> <br />
            
            归档
          </a>
        </li>
      
        
        <li class="menu-item menu-item-tags">
          <a href="/tags" rel="section">
            
              <i class="menu-item-icon fa fa-tags fa-fw"></i> <br />
            
            标签
          </a>
        </li>
      
        
        <li class="menu-item menu-item-commonweal">
          <a href="/404.html" rel="section">
            
              <i class="menu-item-icon fa fa-heartbeat fa-fw"></i> <br />
            
            公益404
          </a>
        </li>
      

      
      
    </ul>
  

  
</nav>

 </div>
    </header>

    <main id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content">
          
  <section id="posts" class="posts-expand">
    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="/2015/12/23/nodejs/Node-js文件系统、路径的操作函数/" itemprop="url">
                  Node.js文件系统、路径的操作学习笔记
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-12-23T10:49:42+08:00" content="2015-12-23">
              2015-12-23
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/node/" itemprop="url" rel="index">
                    <span itemprop="name">node</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/12/23/nodejs/Node-js文件系统、路径的操作函数/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/12/23/nodejs/Node-js文件系统、路径的操作函数/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <p>将Node.js的文件系统、文件流及路径操作API详细的学习了一下，代码都是测试过的，也许很简单，<br>但为了打好基础，还是要有点一丝不苟的精神，从中我也更深入理解异步回调事件机制，希望对你有用……</p> <blockquote> <p>公共引用</p> </blockquote> <figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> fs = <span class="built_in">require</span>(<span class="string">'fs'</span>)</span><br><span class="line"> ,path = <span class="built_in">require</span>(<span class="string">'path'</span>);</span><br></pre></td></tr></table></figure> <h2 id="读取文件-readFile"><a href="#读取文件-readFile" class="headerlink" title="读取文件 readFile"></a>读取文件 readFile</h2><p>readFile(filename,[options],callback);</p> <ul> <li>filename, 必选参数，文件名</li> <li>[options],可选参数，可指定flag（文件操作选项，如r+ 读写；w+ 读写，文件不存在则创建）及encoding属性</li> <li>callback 读取文件后的回调函数，参数默认第一个err,第二个data 数据</li> </ul> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fs.readFile(<span class="string">'/etc/passwd'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, data</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">  <span class="built_in">console</span>.log(data);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure> <h2 id="写文件-writeFile"><a href="#写文件-writeFile" class="headerlink" title="写文件 writeFile"></a>写文件 writeFile</h2><p>fs.writeFile(filename,data,[options],callback);<br>var w_data = ‘这是一段通过fs.writeFile函数写入的内容；\r\n’;<br>var w_data = new Buffer(w_data);</p> <ul> <li>filename, 必选参数，文件名</li> <li>data, 写入的数据，可以字符或一个Buffer对象</li> <li>[options],flag,mode(权限),encoding</li> <li>callback 读取文件后的回调函数，参数默认第一个err,第二个data 数据</li> </ul> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fs.writeFile(<span class="string">'message.txt'</span>, <span class="string">'Hello Node.js'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'It\'s saved!'</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure> <h2 id="以追加方式写文件-appendFile"><a href="#以追加方式写文件-appendFile" class="headerlink" title="以追加方式写文件 appendFile"></a>以追加方式写文件 appendFile</h2><p> fs.appendFile(filename,data,[options],callback);</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"> fs.appendFile(<span class="string">'message.txt'</span>, <span class="string">'data to append'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">  <span class="keyword">if</span> (err) <span class="keyword">throw</span> err;</span><br><span class="line">  <span class="built_in">console</span>.log(<span class="string">'The "data to append" was appended to file!'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure> <p> or</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">fs.appendFile(<span class="string">'message.txt'</span>, <span class="string">'data to append'</span>, <span class="string">'utf8'</span>, callback);</span><br></pre></td></tr></table></figure> <h2 id="打开文件-open"><a href="#打开文件-open" class="headerlink" title="打开文件 open"></a>打开文件 open</h2><p>fs.open(filename, flags, [mode], callback);</p> <ul> <li>filename, 必选参数，文件名</li> <li>flags, 操作标识，如”r”,读方式打开</li> <li>[mode],权限，如777，表示任何用户读写可执行</li> <li>callback 打开文件后回调函数，参数默认第一个err,第二个fd为一个整数，表示打开文件返回的文件描述符，window中又称文件句柄</li> </ul> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">fs.open(__dirname + <span class="string">'/test.txt'</span>, <span class="string">'r'</span>, <span class="string">'0666'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, fd</span>) </span>&#123;</span><br><span class="line">    <span class="built_in">console</span>.log(fd);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure> <h2 id="读文件，读取打开的文件内容到缓冲区-read"><a href="#读文件，读取打开的文件内容到缓冲区-read" class="headerlink" title="读文件，读取打开的文件内容到缓冲区 read"></a>读文件，读取打开的文件内容到缓冲区 read</h2><p>fs.read(fd, buffer, offset, length, position, callback);</p> <ul> <li>fd, 使用fs.open打开成功后返回的文件描述符</li> <li>buffer, 一个Buffer对象，v8引擎分配的一段内存</li> <li>offset, 整数，向缓存区中写入时的初始位置，以字节为单位</li> <li>length, 整数，读取文件的长度</li> <li>position, 整数，读取文件初始位置；文件大小以字节为单位</li> <li><p>callback(err, bytesRead, buffer), 读取执行完成后回调函数，bytesRead实际读取字节数，被读取的缓存区对象</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br></pre></td><td class="code"><pre><span class="line"> fs.open(__dirname + <span class="string">'/test.txt'</span>, <span class="string">'r'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, fd</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(err) &#123;</span><br><span class="line">		<span class="built_in">console</span>.error(err);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="keyword">var</span> buffer = <span class="keyword">new</span> Buffer(<span class="number">255</span>);</span><br><span class="line">		<span class="built_in">console</span>.log(buffer.length);</span><br><span class="line">		<span class="comment">//每一个汉字utf8编码是3个字节，英文是1个字节</span></span><br><span class="line">		fs.read(fd, buffer, <span class="number">0</span>, <span class="number">9</span>, <span class="number">3</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, bytesRead, buffer</span>) </span>&#123;</span><br><span class="line">		<span class="keyword">if</span>(err) &#123;</span><br><span class="line">			<span class="keyword">throw</span> err;</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">			<span class="built_in">console</span>.log(bytesRead);</span><br><span class="line">			<span class="built_in">console</span>.log(buffer.slice(<span class="number">0</span>, bytesRead).toString());</span><br><span class="line">			<span class="comment">//读取完后，再使用fd读取时，基点是基于上次读取位置计算;</span></span><br><span class="line">			fs.read(fd, buffer, <span class="number">0</span>, <span class="number">9</span>, <span class="literal">null</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, bytesRead, buffer</span>) </span>&#123;</span><br><span class="line">				<span class="built_in">console</span>.log(bytesRead);</span><br><span class="line">				<span class="built_in">console</span>.log(buffer.slice(<span class="number">0</span>, bytesRead).toString());</span><br><span class="line">				&#125;);</span><br><span class="line"></span><br><span class="line">			&#125;</span><br><span class="line"></span><br><span class="line">		&#125;);</span><br><span class="line"></span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure> </li> </ul> <h2 id="写文件，将缓冲区内数据写入使用fs-open打开的文件"><a href="#写文件，将缓冲区内数据写入使用fs-open打开的文件" class="headerlink" title="写文件，将缓冲区内数据写入使用fs.open打开的文件"></a>写文件，将缓冲区内数据写入使用fs.open打开的文件</h2><p>fs.write(fd, buffer, offset, length, position, callback);</p> <ul> <li>fd, 使用fs.open打开成功后返回的文件描述符</li> <li>buffer, 一个Buffer对象，v8引擎分配的一段内存</li> <li>offset, 整数，从缓存区中读取时的初始位置，以字节为单位</li> <li>length, 整数，从缓存区中读取数据的字节数</li> <li>position, 整数，写入文件初始位置；</li> <li><p>callback(err, written, buffer), 写入操作执行完成后回调函数，written实际写入字节数，buffer被读取的缓存区对象</p> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line">fs.open(__dirname + <span class="string">'/test.txt'</span>, <span class="string">'a'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, fd</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(err) &#123;</span><br><span class="line">		<span class="built_in">console</span>.error(err);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		<span class="keyword">var</span> buffer = <span class="keyword">new</span> Buffer(<span class="string">'写入文件数据内容'</span>);</span><br><span class="line">		<span class="comment">//写入'入文件'三个字</span></span><br><span class="line">		fs.write(fd, buffer, <span class="number">3</span>, <span class="number">9</span>, <span class="number">12</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, written, buffer</span>) </span>&#123;</span><br><span class="line">			<span class="keyword">if</span>(err) &#123;</span><br><span class="line">				<span class="built_in">console</span>.log(<span class="string">'写入文件失败'</span>);</span><br><span class="line">				<span class="built_in">console</span>.error(err);</span><br><span class="line">				<span class="keyword">return</span>;</span><br><span class="line">			&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">				<span class="built_in">console</span>.log(buffer.toString());</span><br><span class="line">				fs.write(fd, buffer, <span class="number">12</span>, <span class="number">9</span>, <span class="literal">null</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, written, buffer</span>) </span>&#123;</span><br><span class="line">					<span class="built_in">console</span>.log(buffer.toString());</span><br><span class="line">				&#125;)</span><br><span class="line">			&#125;</span><br><span class="line">		&#125;);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure> </li> </ul> <h2 id="刷新缓存区-fsync"><a href="#刷新缓存区-fsync" class="headerlink" title="刷新缓存区 fsync"></a>刷新缓存区 fsync</h2><p>使用fs.write写入文件时，操作系统是将数据读到内存，再把数据写入到文件中，<br>当数据读完时并不代表数据已经写完，因为有一部分还可能在内在缓冲区内。</p> <p>因此可以使用fs.fsync方法将内存中数据写入文件；–刷新内存缓冲区；</p> <p>fs.fsync(fd, [callback])</p> <ul> <li>fd, 使用fs.open打开成功后返回的文件描述符</li> <li>[callback(err, written, buffer)], 写入操作执行完成后回调函数，written实际写入字节数，buffer被读取的缓存区对象</li> </ul> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">fs.open(__dirname + <span class="string">'/test.txt'</span>, <span class="string">'a'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, fd</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(err)</span><br><span class="line">		<span class="keyword">throw</span> err;</span><br><span class="line">	<span class="keyword">var</span> buffer = <span class="keyword">new</span> Buffer(<span class="string">'我爱nodejs编程'</span>);</span><br><span class="line">	</span><br><span class="line">	fs.write(fd, buffer, <span class="number">0</span>, <span class="number">9</span>, <span class="number">0</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, written, buffer</span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(written.toString());</span><br><span class="line">		fs.write(fd, buffer, <span class="number">9</span>, buffer.length - <span class="number">9</span>, <span class="literal">null</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, written</span>) </span>&#123;</span><br><span class="line">			<span class="built_in">console</span>.log(written.toString());</span><br><span class="line">			fs.fsync(fd);</span><br><span class="line">			fs.close(fd);</span><br><span class="line">		&#125;)</span><br><span class="line">	&#125;);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure> <h2 id="创建目录-mkdir"><a href="#创建目录-mkdir" class="headerlink" title="创建目录 mkdir"></a>创建目录 mkdir</h2><p>使用fs.mkdir创建目录</p> <p>fs.mkdir(path, [mode], callback);</p> <ul> <li>path, 被创建目录的完整路径及目录名；</li> <li>[mode], 目录权限，默认0777</li> <li>[callback(err)], 创建完目录回调函数,err错误对象</li> </ul> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">fs.mkdir(__dirname + <span class="string">'/fsDir'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(err)</span><br><span class="line">		<span class="keyword">throw</span> err;	</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'创建目录成功'</span>)</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure> <h2 id="读取目录-readdir"><a href="#读取目录-readdir" class="headerlink" title="读取目录 readdir"></a>读取目录 readdir</h2><p>使用fs.readdir读取目录，重点其回调函数中files对象</p> <p>fs.readdir(path, callback);</p> <ul> <li>path, 要读取目录的完整路径及目录名；</li> <li>[callback(err, files)], 读完目录回调函数；err错误对象，files数组，存放读取到的目录中的所有文件名</li> </ul> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line">fs.readdir(__dirname + <span class="string">'/fsDir/'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, files</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(err) &#123;</span><br><span class="line">		<span class="built_in">console</span>.error(err);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125; <span class="keyword">else</span> &#123;</span><br><span class="line">		files.forEach(<span class="function"><span class="keyword">function</span> (<span class="params">file</span>) </span>&#123;</span><br><span class="line">			<span class="keyword">var</span> filePath = path.normalize(__dirname + <span class="string">'/fsDir/'</span> + file);</span><br><span class="line">			fs.stat(filePath, <span class="function"><span class="keyword">function</span> (<span class="params">err, stat</span>) </span>&#123;</span><br><span class="line">				<span class="keyword">if</span>(stat.isFile()) &#123;</span><br><span class="line">					<span class="built_in">console</span>.log(filePath + <span class="string">' is: '</span> + <span class="string">'file'</span>);</span><br><span class="line">				&#125;</span><br><span class="line">				<span class="keyword">if</span>(stat.isDirectory()) &#123;</span><br><span class="line">					<span class="built_in">console</span>.log(filePath + <span class="string">' is: '</span> + <span class="string">'dir'</span>);</span><br><span class="line">				&#125;</span><br><span class="line">			&#125;);</span><br><span class="line">		&#125;);</span><br><span class="line">		<span class="keyword">for</span> (<span class="keyword">var</span> i = <span class="number">0</span>; i &lt; files.length; i++) &#123;</span><br><span class="line">			<span class="comment">//使用闭包无法保证读取文件的顺序与数组中保存的致</span></span><br><span class="line">			(<span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">				<span class="keyword">var</span> filePath = path.normalize(__dirname + <span class="string">'/fsDir/'</span> + files[i]);</span><br><span class="line">				fs.stat(filePath, <span class="function"><span class="keyword">function</span> (<span class="params">err, stat</span>) </span>&#123;</span><br><span class="line">					<span class="keyword">if</span>(stat.isFile()) &#123;</span><br><span class="line">						<span class="built_in">console</span>.log(filePath + <span class="string">' is: '</span> + <span class="string">'file'</span>);</span><br><span class="line">					&#125;</span><br><span class="line">					<span class="keyword">if</span>(stat.isDirectory()) &#123;</span><br><span class="line">						<span class="built_in">console</span>.log(filePath + <span class="string">' is: '</span> + <span class="string">'dir'</span>);</span><br><span class="line">					&#125;</span><br><span class="line">				&#125;);</span><br><span class="line">			&#125;)();</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure> <h2 id="查看文件与目录的信息"><a href="#查看文件与目录的信息" class="headerlink" title="查看文件与目录的信息"></a>查看文件与目录的信息</h2><p>fs.stat(path, callback);</p> <p>fs.lstat(path, callback); //查看符号链接文件</p> <ul> <li>path, 要查看目录/文件的完整路径及名；</li> <li>[callback(err, stats)], 操作完成回调函数；err错误对象，stat fs.Stat一个对象实例，<br>提供如:isFile, isDirectory,isBlockDevice等方法及size,ctime,mtime等属性</li> </ul> <p>//实例，查看fs.readdir</p> <h2 id="查看文件与目录的是否存在-exists"><a href="#查看文件与目录的是否存在-exists" class="headerlink" title="查看文件与目录的是否存在 exists"></a>查看文件与目录的是否存在 exists</h2><p>fs.exists(path, callback);</p> <ul> <li>path, 要查看目录/文件的完整路径及名；</li> <li>[callback(exists)], 操作完成回调函数；exists true存在，false表示不存在</li> </ul> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">fs.exists(__dirname + <span class="string">'/te'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">exists</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">var</span> retTxt = exists ? retTxt = <span class="string">'文件存在'</span> : <span class="string">'文件不存在'</span>;</span><br><span class="line">	<span class="built_in">console</span>.log(retTxt);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure> <h2 id="修改文件访问时间与修改时间-utimes"><a href="#修改文件访问时间与修改时间-utimes" class="headerlink" title="修改文件访问时间与修改时间 utimes"></a>修改文件访问时间与修改时间 utimes</h2><p>fs.utimes(path, atime, mtime, callback);</p> <ul> <li>path, 要查看目录/文件的完整路径及名；</li> <li>atime, 新的访问时间</li> <li>ctime, 新的修改时间</li> <li>[callback(err)], 操作完成回调函数；err操作失败对象</li> </ul> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line">fs.utimes(__dirname + <span class="string">'/test.txt'</span>, <span class="keyword">new</span> <span class="built_in">Date</span>(), <span class="keyword">new</span> <span class="built_in">Date</span>(), <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(err) &#123;</span><br><span class="line">		<span class="built_in">console</span>.error(err);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	fs.stat(__dirname + <span class="string">'/test.txt'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err, stat</span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'访问时间: '</span> + stat.atime.toString() + <span class="string">'; \n修改时间：'</span> + stat.mtime);</span><br><span class="line">		<span class="built_in">console</span>.log(stat.mode);</span><br><span class="line">	&#125;)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure> <h2 id="修改文件或目录的操作权限-chmod"><a href="#修改文件或目录的操作权限-chmod" class="headerlink" title="修改文件或目录的操作权限 chmod"></a>修改文件或目录的操作权限 chmod</h2><p>fs.chmod(path, mode, callback);</p> <ul> <li>path, 要查看目录/文件的完整路径及名；</li> <li>mode, 指定权限，如：0666 8进制，权限：所有用户可读、写，</li> <li>[callback(err)], 操作完成回调函数；err操作失败对象</li> </ul> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"> fs.chmod(__dirname + <span class="string">'/fsDir'</span>, <span class="number">0666</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(err) &#123;</span><br><span class="line">		<span class="built_in">console</span>.error(err);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'修改权限成功'</span>)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure> <h2 id="移动-重命名文件或目录-rename"><a href="#移动-重命名文件或目录-rename" class="headerlink" title="移动/重命名文件或目录 rename"></a>移动/重命名文件或目录 rename</h2><p>fs.rename(oldPath, newPath, callback);</p> <ul> <li>oldPath, 原目录/文件的完整路径及名；</li> <li>newPath, 新目录/文件的完整路径及名；如果新路径与原路径相同，而只文件名不同，则是重命名</li> <li>[callback(err)], 操作完成回调函数；err操作失败对象</li> </ul> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">fs.rename(__dirname + <span class="string">'/test'</span>, __dirname + <span class="string">'/fsDir'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(err) &#123;</span><br><span class="line">		<span class="built_in">console</span>.error(err);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'重命名成功'</span>)</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure> <h2 id="删除空目录-rmdir"><a href="#删除空目录-rmdir" class="headerlink" title="删除空目录 rmdir"></a>删除空目录 rmdir</h2><p>fs.rmdir(path, callback);</p> <ul> <li>path, 目录的完整路径及目录名；</li> <li>[callback(err)], 操作完成回调函数；err操作失败对象</li> </ul> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">fs.rmdir(__dirname + <span class="string">'/test'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">	fs.mkdir(__dirname + <span class="string">'/test'</span>, <span class="number">0666</span>, <span class="function"><span class="keyword">function</span> (<span class="params">err</span>) </span>&#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'创建test目录'</span>);</span><br><span class="line">	&#125;);</span><br><span class="line">	</span><br><span class="line">	<span class="keyword">if</span>(err) &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'删除空目录失败，可能原因：1、目录不存在，2、目录不为空'</span>)</span><br><span class="line">		<span class="built_in">console</span>.error(err);</span><br><span class="line">		<span class="keyword">return</span>;</span><br><span class="line">	&#125;</span><br><span class="line"></span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'删除空目录成功!'</span>);</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure> <h2 id="监视文件-watchFile"><a href="#监视文件-watchFile" class="headerlink" title="监视文件 watchFile"></a>监视文件 watchFile</h2><p>对文件进行监视，并且在监视到文件被修改时执行处理 </p> <p>fs.watchFile(filename, [options], listener);</p> <ul> <li>filename, 完整路径及文件名；</li> <li>[options], persistent true表示持续监视，不退出程序；interval 单位毫秒，表示每隔多少毫秒监视一次文件</li> <li>listener, 文件发生变化时回调，有两个参数：curr为一个fs.Stat对象，被修改后文件，prev,一个fs.Stat对象，表示修改前对象</li> </ul> <figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line">fs.watchFile(__dirname + <span class="string">'/test.txt'</span>, &#123;interval: <span class="number">20</span>&#125;, <span class="function"><span class="keyword">function</span> (<span class="params">curr, prev</span>) </span>&#123;</span><br><span class="line">	<span class="keyword">if</span>(<span class="built_in">Date</span>.parse(prev.ctime) == <span class="number">0</span>) &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'文件被创建!'</span>);</span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">Date</span>.parse(curr.ctime) == <span class="number">0</span>) &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'文件被删除!'</span>)</span><br><span class="line">	&#125; <span class="keyword">else</span> <span class="keyword">if</span>(<span class="built_in">Date</span>.parse(curr.mtime) != <span class="built_in">Date</span>.parse(prev.mtime)) &#123;</span><br><span class="line">		<span class="built_in">console</span>.log(<span class="string">'文件有修改'</span>);</span><br><span class="line">	&#125;</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">fs.watchFile(__dirname + <span class="string">'/test.txt'</span>, <span class="function"><span class="keyword">function</span> (<span class="params">curr, prev</span>) </span>&#123;</span><br><span class="line">	<span class="built_in">console</span>.log(<span class="string">'这是第二个watch,监视到文件有修改'</span>);</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="/2015/12/17/webapp/关于app-h5页面的各大电商网站的遮罩层解决思路一/" itemprop="url">
                  关于app h5页面的各大电商网站的遮罩层解决思路一
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-12-17T14:06:19+08:00" content="2015-12-17">
              2015-12-17
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/mobile/" itemprop="url" rel="index">
                    <span itemprop="name">mobile</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/12/17/webapp/关于app-h5页面的各大电商网站的遮罩层解决思路一/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/12/17/webapp/关于app-h5页面的各大电商网站的遮罩层解决思路一/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h2 id="需求展现举例"><a href="#需求展现举例" class="headerlink" title="需求展现举例"></a>需求展现举例</h2><blockquote> <p>H5 嵌入 天猫商品详细页</p> </blockquote> <p><img src="http://zanjs.b0.upaiyun.com/image/c/1a/841e4608c6989cf394e5b1ca98a5b.png" alt=""></p> <blockquote> <p>加入遮罩层后</p> </blockquote> <p><img src="http://zanjs.b0.upaiyun.com/image/0/b0/5a5f70af00a683037b9a5950e4c3a.png" alt=""></p> <blockquote> <p>加入遮罩层后参数说明</p> </blockquote> <p><img src="http://zanjs.b0.upaiyun.com/image/2/03/2d4b0f88ce78231be4b243aafaf93.png" alt=""></p> <h2 id="参数指南"><a href="#参数指南" class="headerlink" title="参数指南"></a>参数指南</h2><blockquote> <p>到这里 我们可以看到 遮罩层有 <code>2</code> 类 ;</p> </blockquote> <p>分别是: <strong> maskTop(‘顶部遮罩层’) </strong> 、<strong> maskBottom(‘底部遮罩层’) </strong>;</p> <p>每个遮罩层分别有 <strong>height(‘高度’)</strong> 、<strong>backgroundColor(‘背景颜色’)</strong></p> <p><strong> maskTop(‘顶部遮罩层’) </strong> 有 <strong>top(‘距离顶部位置’)</strong></p> <p><strong> maskBottom(‘底部遮罩层’) </strong> 有 <strong>bottom(‘距离低部位置’)</strong></p> <h2 id="各大电商网站布局的不同"><a href="#各大电商网站布局的不同" class="headerlink" title="各大电商网站布局的不同"></a>各大电商网站布局的不同</h2><blockquote> <p>介于形形色色的电商网站的布局有所不同 , 所以需要我们分别设置 各个网站遮罩层的 <strong>参数</strong></p> </blockquote> <h2 id="遮罩层的参数灵活化"><a href="#遮罩层的参数灵活化" class="headerlink" title="遮罩层的参数灵活化"></a>遮罩层的参数灵活化</h2><blockquote> <p>为了可以更好的管理 遮罩层的参数位置和显现样式，一切都有后台添加设置</p> </blockquote> <h2 id="demo的数据演示"><a href="#demo的数据演示" class="headerlink" title="demo的数据演示"></a>demo的数据演示</h2><p>如下代码可以看到:</p> <p><code>tmall.com</code> 和 <code>taobao.com</code> <strong> 2 </strong> 个网站的 遮罩层的参数</p> <p>由于在挂国外ip vpn代理访问 天猫页面的时候,天猫网站做了页面导向,以致页面布局发生了变动,<br>从而导致页面遮罩层的错误，所以做了 <code>china</code> 和 <code>noChina</code> 的 布局参数</p> <p><code>china</code> 和 <code>noChina</code> 下面的 参数说明：</p> <ul> <li><code>topMask</code> 对应的是 <strong> maskTop(‘顶部遮罩层’) </strong> </li> <li><code>bottomMask</code> 对应的是 <strong> maskBottom(‘底部遮罩层’) </strong></li> </ul> <p>最后可以看到还有一个 <code>status</code> 参数：</p> <ul> <li><code>status</code> 意为是否启用 <code>noChina</code> 0 为启用 ; 若不启用 可以填写其它字符</li> </ul> <blockquote> <p>以下字段必须全部填写， 如果 <code>status</code> 字段为 非 0 , <code>noChina</code>对象 可以无</p> </blockquote> <figure class="highlight xquery"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br></pre></td><td class="code"><pre><span class="line">var fixedLib = &#123;	</span><br><span class="line">	<span class="string">'tmall.com'</span>:&#123;</span><br><span class="line">		<span class="string">'status'</span>:<span class="number">0</span>,</span><br><span class="line">		<span class="string">'china'</span>:&#123;</span><br><span class="line">			<span class="string">'topMask'</span>:&#123;</span><br><span class="line">				<span class="string">'top'</span>:<span class="string">'40px'</span>,</span><br><span class="line">				<span class="string">'height'</span>:<span class="string">'50px'</span>,</span><br><span class="line">				<span class="string">'backgroundColor'</span>:<span class="string">'#FFF'</span></span><br><span class="line">			&#125;,</span><br><span class="line">			<span class="string">'bottomMask'</span>:&#123;</span><br><span class="line">				<span class="string">'bottom'</span>:<span class="string">'0'</span>,</span><br><span class="line">				<span class="string">'height'</span>:<span class="string">'50px'</span>,</span><br><span class="line">				<span class="string">'backgroundColor'</span>:<span class="string">'#FFF'</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,</span><br><span class="line">		<span class="string">'noChina'</span>:&#123;</span><br><span class="line">			<span class="string">'topMask'</span>:&#123;</span><br><span class="line">				<span class="string">'top'</span>:<span class="string">'0px'</span>,</span><br><span class="line">				<span class="string">'height'</span>:<span class="string">'50px'</span>,</span><br><span class="line">				<span class="string">'backgroundColor'</span>:<span class="string">'#FFF'</span></span><br><span class="line">			&#125;,</span><br><span class="line">			<span class="string">'bottomMask'</span>:&#123;</span><br><span class="line">				<span class="string">'bottom'</span>:<span class="string">'20px'</span>,</span><br><span class="line">				<span class="string">'height'</span>:<span class="string">'50px'</span>,</span><br><span class="line">				<span class="string">'backgroundColor'</span>:<span class="string">'#FFF'</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;,</span><br><span class="line">	<span class="string">'taobao.com'</span>:&#123;</span><br><span class="line">		<span class="string">'status'</span>:<span class="number">0</span>,</span><br><span class="line">		<span class="string">'china'</span>:&#123;</span><br><span class="line">			<span class="string">'topMask'</span>:&#123;</span><br><span class="line">				<span class="string">'top'</span>:<span class="string">'20px'</span>,</span><br><span class="line">				<span class="string">'height'</span>:<span class="string">'50px'</span>,</span><br><span class="line">				<span class="string">'backgroundColor'</span>:<span class="string">'#FFF'</span></span><br><span class="line">			&#125;,</span><br><span class="line">			<span class="string">'bottomMask'</span>:&#123;</span><br><span class="line">				<span class="string">'bottom'</span>:<span class="string">'20px'</span>,</span><br><span class="line">				<span class="string">'height'</span>:<span class="string">'50px'</span>,</span><br><span class="line">				<span class="string">'backgroundColor'</span>:<span class="string">'#FFF'</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;,</span><br><span class="line">		<span class="string">'noChina'</span>:&#123;</span><br><span class="line">			<span class="string">'topMask'</span>:&#123;</span><br><span class="line">				<span class="string">'top'</span>:<span class="string">'0px'</span>,</span><br><span class="line">				<span class="string">'height'</span>:<span class="string">'50px'</span>,</span><br><span class="line">				<span class="string">'backgroundColor'</span>:<span class="string">'#FFF'</span></span><br><span class="line">			&#125;,</span><br><span class="line">			<span class="string">'bottomMask'</span>:&#123;</span><br><span class="line">				<span class="string">'bottom'</span>:<span class="string">'20px'</span>,</span><br><span class="line">				<span class="string">'height'</span>:<span class="string">'50px'</span>,</span><br><span class="line">				<span class="string">'backgroundColor'</span>:<span class="string">'#FFF'</span></span><br><span class="line">			&#125;</span><br><span class="line">		&#125;</span><br><span class="line">	&#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure> <h2 id="业务流程"><a href="#业务流程" class="headerlink" title="业务流程"></a>业务流程</h2><ol> <li><p>获取当前内嵌页面的 地址url (iframe 进来的电商 url) ，得到当前url 的实体域名 (例如：taobao.com，tmall.com，jd.com)</p> </li> <li><p>客户访问页面 -&gt; 获取用户ip </p> </li> <li>查询用户是否属于中国</li> <li>如果是中国ip 直接 查询 实体域名下面的 <code>china</code> 遮罩层参数</li> <li>如果非中国ip 查询 实体域名下面 <code>status</code> 参数的值 ，如果为 0 查询 实体域名下面的 <code>noChina</code> 遮罩层参数 ,否则取 <code>china</code> 遮罩层参数</li> </ol> <figure class="highlight markdown"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">MATCH 1</span><br><span class="line"><span class="bullet">1.	</span><span class="code">`dangdang.com`</span></span><br><span class="line">MATCH 2</span><br><span class="line"><span class="bullet">1.	</span><span class="code">`taobao.com`</span></span><br><span class="line">MATCH 3</span><br><span class="line"><span class="bullet">1.	</span><span class="code">`jd.com`</span></span><br><span class="line">MATCH 4</span><br><span class="line"><span class="bullet">1.	</span><span class="code">`tmall.com`</span></span><br></pre></td></tr></table></figure> <h2 id="demo-演示"><a href="#demo-演示" class="headerlink" title="demo 演示"></a>demo 演示</h2><p><a href="https://github.com/panli-com/app-h5/tree/gh-pages/20151214" target="_blank" rel="external">https://github.com/panli-com/app-h5/tree/gh-pages/20151214</a></p> <h2 id="最后说明"><a href="#最后说明" class="headerlink" title="最后说明"></a>最后说明</h2><p>由于遮罩层的样式和位置 都是由后台添加修改生成而来，所以辛苦添加数据的同学啦！！(<em>^__^</em>) 嘻嘻……</p>
            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="/2015/12/16/api-nnn-li-接口说明初始化/" itemprop="url">
                  api.nnn.li 接口说明初始化
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-12-16T17:59:33+08:00" content="2015-12-16">
              2015-12-16
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/javascript/" itemprop="url" rel="index">
                    <span itemprop="name">javascript</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/12/16/api-nnn-li-接口说明初始化/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/12/16/api-nnn-li-接口说明初始化/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h2 id="开放接口"><a href="#开放接口" class="headerlink" title="开放接口"></a>开放接口</h2><ol> <li><a href="http://api.nnn.li/ip/" target="_blank" rel="external">http://api.nnn.li/ip/</a></li> <li><a href="http://api.nnn.li/ip/37.115.98.238" target="_blank" rel="external">http://api.nnn.li/ip/37.115.98.238</a></li> </ol> <p>ip/ -&gt; 获取当前客户端的 ip 信息<br>ip/37.115.98.238 -&gt; 查询指定 ip 的信息</p> <h2 id="ajax-调用"><a href="#ajax-调用" class="headerlink" title="ajax 调用"></a>ajax 调用</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">$.ajax(&#123;</span><br><span class="line">        type:<span class="string">"GET"</span>,    </span><br><span class="line">        url: <span class="string">"http://api.nnn.li/ip/"</span>,</span><br><span class="line">        dataType:<span class="string">"json"</span>,</span><br><span class="line">        success:<span class="function"><span class="keyword">function</span> (<span class="params">result</span>) </span>&#123;</span><br><span class="line">            <span class="built_in">console</span>.log(<span class="built_in">JSON</span>.stringify(result));</span><br><span class="line">        &#125;,</span><br><span class="line">        error:<span class="function"><span class="keyword">function</span> (<span class="params">result, status</span>) </span>&#123;</span><br><span class="line">        <span class="comment">//处理错误</span></span><br><span class="line">            <span class="built_in">console</span>.log(result);</span><br><span class="line">        &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>
            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="/2015/12/16/express/Node-express项目nginx代理转向绑定域名后-nginx配置获取客户端公网ip/" itemprop="url">
                  Node express项目nginx代理转向绑定域名后 nginx配置获取客户端公网ip
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-12-16T16:29:51+08:00" content="2015-12-16">
              2015-12-16
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/nodejs/" itemprop="url" rel="index">
                    <span itemprop="name">nodejs</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/12/16/express/Node-express项目nginx代理转向绑定域名后-nginx配置获取客户端公网ip/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/12/16/express/Node-express项目nginx代理转向绑定域名后-nginx配置获取客户端公网ip/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h2 id="node-代码"><a href="#node-代码" class="headerlink" title="node 代码"></a>node 代码</h2><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> express = <span class="built_in">require</span>(<span class="string">'express'</span>);</span><br><span class="line"><span class="keyword">var</span> app = express();</span><br><span class="line"><span class="keyword">var</span> os = <span class="built_in">require</span>(<span class="string">'os'</span>);</span><br><span class="line"><span class="keyword">var</span> http = <span class="built_in">require</span>(<span class="string">'http'</span>);</span><br><span class="line"><span class="keyword">var</span> cors = <span class="built_in">require</span>(<span class="string">'cors'</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app.use(cors());</span><br><span class="line"></span><br><span class="line"></span><br><span class="line">app.get(<span class="string">'/'</span>, cors(),<span class="function"><span class="keyword">function</span>(<span class="params">req, res</span>)</span>&#123;  </span><br><span class="line">  <span class="keyword">var</span> ip = getClientIp(req).match(<span class="regexp">/\d+\.\d+\.\d+\.\d+/</span>); </span><br><span class="line">  <span class="built_in">console</span>.log(ip);</span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">getClientIp</span>(<span class="params">req</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> req.headers[<span class="string">'x-forwarded-for'</span>] ||</span><br><span class="line">        req.connection.remoteAddress ||</span><br><span class="line">        req.socket.remoteAddress ||</span><br><span class="line">        req.connection.socket.remoteAddress;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">app.listen(<span class="number">8081</span>);</span><br><span class="line"><span class="built_in">console</span>.log(<span class="string">'listening on port http://localhost:8081/'</span>);</span><br></pre></td></tr></table></figure> <h2 id="nginx-代理"><a href="#nginx-代理" class="headerlink" title="nginx 代理"></a>nginx 代理</h2><figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span>  &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span> nnn.com;</span><br><span class="line">    </span><br><span class="line">    <span class="attribute">location</span> / &#123;</span><br><span class="line">        <span class="attribute">proxy_set_header</span>  X-real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">        <span class="attribute">proxy_pass</span>      http://127.0.0.1:8081;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">     <span class="attribute">access_log</span>  /home/wwwlogs/nnn.com.log  access;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure> <p>直接访问服务器的ip 是正常返回客户端的ip</p> <p>而访问 nginx 代理转向 的域名地址 返回的ip 却是 127.0.01</p> <p>nginx 转向的 proxy_pass 地址是多少 ，返回的就是多少</p> <p>node 如何更好的绑定域名呢？</p> <p><img src="http://sfault-image.b0.upaiyun.com/406/186/4061862233-5670f440a4d08_articlex" alt=""></p> <h2 id="nginx-解决方案"><a href="#nginx-解决方案" class="headerlink" title="nginx 解决方案"></a>nginx 解决方案</h2><p>修改 nginx</p> <figure class="highlight nginx"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="section">server</span>  &#123;</span><br><span class="line">    <span class="attribute">listen</span> <span class="number">80</span>;</span><br><span class="line">    <span class="attribute">server_name</span> nnn.com;</span><br><span class="line">    </span><br><span class="line">    <span class="attribute">location</span> / &#123;</span><br><span class="line">        <span class="attribute">proxy_pass</span>      http://localhost:8081;</span><br><span class="line">        <span class="attribute">proxy_redirect</span> <span class="literal">off</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Real-IP <span class="variable">$remote_addr</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-Forwarded-For <span class="variable">$proxy_add_x_forwarded_for</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> Host <span class="variable">$http_host</span>;</span><br><span class="line">        <span class="attribute">proxy_set_header</span> X-NginX-Proxy <span class="literal">true</span>;</span><br><span class="line">    &#125;</span><br><span class="line"></span><br><span class="line">       <span class="attribute">access_log</span>  /home/wwwlogs/nnn.com.log  access;</span><br><span class="line"> &#125;</span><br></pre></td></tr></table></figure> <h2 id="解构知识"><a href="#解构知识" class="headerlink" title="解构知识"></a>解构知识</h2><p><code>req.ip</code> <a href="http://expressjs.com/en/4x/api.html#req.ip" target="_blank" rel="external">http://expressjs.com/en/4x/api.html#req.ip</a></p> <p><code>trust proxy</code> <a href="http://expressjs.com/en/4x/api.html#trust.proxy.options.table" target="_blank" rel="external">http://expressjs.com/en/4x/api.html#trust.proxy.options.table</a></p>
            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="/2015/12/09/javascript/javascript-iframe-跨域-操作淘宝手机页面-dom/" itemprop="url">
                  javascript iframe 跨域 操作淘宝手机页面 dom
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-12-09T16:57:28+08:00" content="2015-12-09">
              2015-12-09
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/javascript/" itemprop="url" rel="index">
                    <span itemprop="name">javascript</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/12/09/javascript/javascript-iframe-跨域-操作淘宝手机页面-dom/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/12/09/javascript/javascript-iframe-跨域-操作淘宝手机页面-dom/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h2 id="javascript-操作-iframe"><a href="#javascript-操作-iframe" class="headerlink" title="javascript 操作 iframe"></a>javascript 操作 iframe</h2><p>正常情况下 <code>javascript</code> 可以正常操作 <code>iframe</code> 的子页面元素</p> <p><img src="http://zanjs.b0.upaiyun.com/image/2/ba/307edada2e2ca9cc420ffa81268bb.gif" alt="js操作 iframe 的子页面元素"></p> <p>而在尝试 <code>iframe</code> 引入 淘宝页面的时候 却操作不了 </p> <p><img src="http://zanjs.b0.upaiyun.com/image/7/4f/c416ff8f03dd5afb65488037720f8.gif" alt="js操作 跨域 iframe 的子页面元素"></p> <p>浏览器报错信息如下</p> <figure class="highlight livecodeserver"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">Uncaught DOMException: Failed <span class="built_in">to</span> <span class="built_in">read</span> <span class="keyword">the</span> <span class="string">'contentDocument'</span> property <span class="built_in">from</span> <span class="string">'HTMLIFrameElement'</span>:</span><br><span class="line"> Blocked <span class="keyword">a</span> frame <span class="keyword">with</span> origin <span class="string">"http://localhost:3000"</span> <span class="built_in">from</span> accessing <span class="keyword">a</span> cross-origin frame.(…)</span><br></pre></td></tr></table></figure> <p>可以看出来 浏览器阻止了 跨域操作的请求，操作后 感觉肯定有解决的方案</p> <h2 id="寻找解决方案"><a href="#寻找解决方案" class="headerlink" title="寻找解决方案"></a>寻找解决方案</h2><p>先百度后谷歌</p> <p>百度情况很槽糕，没有我想要的答案， 于是就是去了 <code>segmentfault</code> </p> <p>找到了 类似的 需求 <a href="http://segmentfault.com/q/1010000002670960" target="_blank" rel="external">http://segmentfault.com/q/1010000002670960</a></p> <p>找到的答案就是 </p> <ol> <li><code>浏览器会限制跨与操作的，除非你是为浏览器开发插件，可以绕过权限</code></li> <li><code>无解，只能通过后端。</code></li> </ol> <p>然后 谷歌 寻找更加专业的 解决方案</p> <p>我来到了 <code>stackoverflow</code> 寻找解决方案 </p> <p>地址是 <a href="http://stackoverflow.com/questions/6170925/get-dom-content-of-cross-domain-iframe" target="_blank" rel="external">http://stackoverflow.com/questions/6170925/get-dom-content-of-cross-domain-iframe</a></p> <p>被认知的 答案 是 </p> <blockquote> <p>You can’t. XSS protection. Cross site contents can not be read by javascript.<br>No major browser will allow you that.<br>I’m sorry, but this is a design flaw, you should drop the idea.</p> </blockquote> <p>大概意思就是 ：不可能，浏览器 xss 保护 ，跨域网站的内容不能被JavaScript 操作，目前只好放弃这种想法，不知未来是否有改善。</p> <h2 id="问题总结"><a href="#问题总结" class="headerlink" title="问题总结"></a>问题总结</h2><p>目前而言 对应前端来说真是没有解决方案了，好无奈， 而我能想到的就是 后端做服务了 ， 抓到页面内容渲染到前端显示操作，就不存在 跨域的问题了</p> <p>如果您找到了更好的解决方案， 欢迎留言交流 ！！</p>
            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="/2015/12/02/跨域的另一种解决方案——CORS（Cross-Origin-Resource-Sharing）跨域资源共享/" itemprop="url">
                  跨域的另一种解决方案——CORS（Cross-Origin Resource Sharing）跨域资源共享
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-12-02T17:57:45+08:00" content="2015-12-02">
              2015-12-02
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/javascript/" itemprop="url" rel="index">
                    <span itemprop="name">javascript</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/12/02/跨域的另一种解决方案——CORS（Cross-Origin-Resource-Sharing）跨域资源共享/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/12/02/跨域的另一种解决方案——CORS（Cross-Origin-Resource-Sharing）跨域资源共享/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <p>在我们日常的项目开发时使用AJAX，传统的Ajax请求只能获取在同一个域名下面的资源，但是HTML5打破了这个限制，允许Ajax发起跨域的请求。<br>浏览器是可以发起跨域请求的，比如你可以外链一个外域的图片或者脚本。<br>但是Javascript脚本是不能获取这些资源的内容的，它只能被浏览器执行或渲染。<br>主要原因还是出于安全考虑，浏览器会限制脚本中发起的跨站请求。<br>(同源策略， 即JavaScript或Cookie只能访问同域下的内容)。<br>跨域的解决方案有多重JSONP、Flash、Iframe等，当然还有CORS（跨域资源共享，Cross-Origin Resource Sharing）今天就来了解下CORS的原理，以及如何使用。</p>
            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="/2015/12/02/ajax/同样域名下端口号不一样-ajax-请求ie-浏览器可以而firefox和-谷歌不可以/" itemprop="url">
                  同样域名下端口号不一样 ajax 请求ie 浏览器可以而firefox和 谷歌不可以
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-12-02T17:11:52+08:00" content="2015-12-02">
              2015-12-02
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/javascript/" itemprop="url" rel="index">
                    <span itemprop="name">javascript</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/12/02/ajax/同样域名下端口号不一样-ajax-请求ie-浏览器可以而firefox和-谷歌不可以/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/12/02/ajax/同样域名下端口号不一样-ajax-请求ie-浏览器可以而firefox和-谷歌不可以/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <blockquote> <p>端口号不一致在 firefox 和 谷歌 下也算跨域的，而 IE端口不一样不算跨域</p> </blockquote> <h2 id="jQuery-Ajax-简单的实现跨域请求-demo"><a href="#jQuery-Ajax-简单的实现跨域请求-demo" class="headerlink" title="jQuery Ajax 简单的实现跨域请求 demo"></a>jQuery Ajax 简单的实现跨域请求 demo</h2><blockquote> <p>html 代码清单：</p> </blockquote> <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span> <span class="attr">src</span>=<span class="string">"http://apps.bdimg.com/libs/jquery/1.9.1/jquery.min.js"</span>&gt;</span><span class="undefined"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">script</span> <span class="attr">type</span>=<span class="string">"text/javascript"</span>&gt;</span><span class="javascript"></span><br><span class="line">$(<span class="function"><span class="keyword">function</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">$.ajax(</span><br><span class="line">    &#123;</span><br><span class="line">        type:<span class="string">'get'</span>,</span><br><span class="line">        url : <span class="string">'http://www.youxiaju.com/validate.php?loginuser=lee&amp;loginpass=123456'</span>,</span><br><span class="line">        dataType : <span class="string">'jsonp'</span>,</span><br><span class="line">        jsonp:<span class="string">"jsoncallback"</span>,</span><br><span class="line">        success  : <span class="function"><span class="keyword">function</span>(<span class="params">data</span>) </span>&#123;</span><br><span class="line">            alert(<span class="string">"用户名："</span>+ data.user +<span class="string">" 密码："</span>+ data.pass);</span><br><span class="line">        &#125;,</span><br><span class="line">        error : <span class="function"><span class="keyword">function</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">            alert(<span class="string">'fail'</span>);</span><br><span class="line">        &#125;</span><br><span class="line">    &#125;</span><br><span class="line">);</span><br><span class="line">&#125;)</span><br><span class="line"></span><span class="tag">&lt;/<span class="name">script</span>&gt;</span></span><br></pre></td></tr></table></figure> <blockquote> <p>服务端 validate.php 代码清单：</p> </blockquote> <figure class="highlight xml"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="php"><span class="meta">&lt;?php</span></span><br><span class="line">header(<span class="string">'Content-Type:text/html;Charset=utf-8'</span>);</span><br><span class="line">$arr = <span class="keyword">array</span>(</span><br><span class="line">	<span class="string">"user"</span> =&gt; $_GET[<span class="string">'loginuser'</span>],</span><br><span class="line">	<span class="string">"pass"</span> =&gt; $_GET[<span class="string">'loginpass'</span>],</span><br><span class="line">	<span class="string">"name"</span> =&gt; <span class="string">'response'</span></span><br><span class="line"></span><br><span class="line">);</span><br><span class="line"><span class="keyword">echo</span> $_GET[<span class="string">'jsoncallback'</span>] . <span class="string">"("</span>.json_encode($arr).<span class="string">")"</span>;</span></span><br></pre></td></tr></table></figure>
            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="/2015/11/13/flintjs，主打Super-Hot-Reload/" itemprop="url">
                  flintjs，主打Super Hot Reload
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-11-13T17:47:09+08:00" content="2015-11-13">
              2015-11-13
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/javascript/" itemprop="url" rel="index">
                    <span itemprop="name">javascript</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/11/13/flintjs，主打Super-Hot-Reload/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/11/13/flintjs，主打Super-Hot-Reload/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h2 id="flintjs-将颠覆前端-UI-开发？"><a href="#flintjs-将颠覆前端-UI-开发？" class="headerlink" title="flintjs 将颠覆前端 UI 开发？"></a>flintjs 将颠覆前端 UI 开发？</h2><p>在<a href="http://www.zhihu.com/question/37234467" target="_blank" rel="external">知乎</a> 上 看到尤雨溪 针对 flintjs 的问答</p> <p>著作权归作者所有。<br>商业转载请联系作者获得授权，非商业转载请注明出处。<br>作者：尤雨溪<br>链接：<a href="http://www.zhihu.com/question/37234467/answer/71143805" target="_blank" rel="external">http://www.zhihu.com/question/37234467/answer/71143805</a><br>来源：知乎</p> <p>没想到还真有人问了。首先楼下什么『我也有能一个月内干掉 bat 的思路』，就一边歇着去吧。<br>人家这个不是思路，是已经做出来了。<br>创始人之一 Nick 是 20 under 20 的 Thiel Fellow，25 岁不到就卖掉了自己的第一个公司，恕我直言，人家这种执行力有一个思路和你有一个思路，不是一个层次。<br>我说它是个颠覆，并不是说这东西一出来就能在实际生产中取代 React Angular 之类的东西，<br>而是因为它代表了一种更先进的开发模式，而且可以预见将来不仅仅是前端开发，<br>而是所有的 UI 开发都会向这个模式发展。<br>【补充一段，这里一开始没讲清楚，Flint 作为一个框架也就是简化版的 React，但我觉得颠覆的主要是它提供的即时反馈的开发体验。】<br>Bret Victor 的演讲很多人都看过，但他的 demo 并不普适，他虽然自己能做出那样的 demo，<br>却并没有告诉我们如何提供一个普通人都可以使用的即时开发环境；LightTable 搞了那么久也没见几个人用，<br>感觉基本已经坑了；Swift Playground 已经做得很接近，但也只能用来做 prototyping。可以说 Flint 的颠覆性在于把这种实时反馈的开发模式第一次做到了和实际生产环境接轨。<br>Flint 的核心实际上是一套实时代码编译 + 热更新系统，也就是在你一边打字的时候就一边对你的代码进行实时编译（不需要存档，注意这个功能需要依赖 atom 编辑器插件，目前还没有公开），<br>保留应用当前状态，实时反馈，并且有完善的错误提示甚至类型检查。这是个什么概念，你不亲手用下可能体会不出来。<br>我看到有些人说 figwheel 已经实现啦，其实还是不一样。因为 Flint 直接利用编辑器插件，所以你打下每一个字母的时候它都知道。<br>借此 Flint 极大地优化了它的 parsing，直接在现有的 AST 局部进行修改，而不是对整个文件重新 parse。<br>大部分情况下，你按下一个字母，20ms 以内就会有反馈。想象一下，从手动 F5 到 auto reload 带来了开发体验的一个质的提升，<br>从 auto reload 到 hot reload (on save) 又是一个质的提升，从 hot reload on save 到 hot reload on type… 又是一个质的提升。<br>如果说几个月前看 Dan Abramov 的 hot-reload 演讲大家是被惊艳的话，看过 Nick 的实际 demo 后真的只能用震撼来形容。<br>它最后产出的代码是标准的可用于生产环境的 React 代码… 是否经受过工程检验是一回事（实际上 Flint 现在就有 FB Apple 的人作为 beta tester 在使用)，<br>但你不能否认一旦这玩意儿成熟了，你不会再想用旧的模式去开发 UI。就算最后不是 Flint，<br>也一定会有另一个项目把这个模式发扬光大。一个 trivia: Flint 最早的版本是用 Haskell 写的，只是因为用 Haskell 的人太少了所以才用 js 重写（Elm 哭了）。</p>
            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="/2015/11/10/mongodb/MongoDB学习基本命令的使用笔记/" itemprop="url">
                  MongoDB学习基本命令的使用笔记
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-11-10T13:58:49+08:00" content="2015-11-10">
              2015-11-10
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/mongodb/" itemprop="url" rel="index">
                    <span itemprop="name">mongodb</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/11/10/mongodb/MongoDB学习基本命令的使用笔记/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/11/10/mongodb/MongoDB学习基本命令的使用笔记/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h2 id="基础块"><a href="#基础块" class="headerlink" title="基础块"></a>基础块</h2><h3 id="Help查看命令提示"><a href="#Help查看命令提示" class="headerlink" title="Help查看命令提示"></a>Help查看命令提示</h3><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">db<span class="selector-class">.help</span>();</span><br><span class="line"></span><br><span class="line">db<span class="selector-class">.yourColl</span><span class="selector-class">.help</span>();</span><br><span class="line"></span><br><span class="line">db<span class="selector-class">.youColl</span><span class="selector-class">.find</span>()<span class="selector-class">.help</span>();</span><br><span class="line"></span><br><span class="line">rs<span class="selector-class">.help</span>();</span><br></pre></td></tr></table></figure> <h3 id="查询所有数据库"><a href="#查询所有数据库" class="headerlink" title="查询所有数据库"></a>查询所有数据库</h3><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show </span>dbs<span class="comment">;</span></span><br></pre></td></tr></table></figure> <h3 id="切换-创建数据库"><a href="#切换-创建数据库" class="headerlink" title="切换/创建数据库"></a>切换/创建数据库</h3><blockquote> <p> 当创建一个集合(table)的时候会自动创建当前数据库</p> </blockquote> <figure class="highlight php"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">use</span> <span class="title">DBName</span>;</span><br></pre></td></tr></table></figure> <h3 id="查看当前使用的数据库"><a href="#查看当前使用的数据库" class="headerlink" title="查看当前使用的数据库"></a>查看当前使用的数据库</h3><figure class="highlight dns"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">db.getName()<span class="comment">;</span></span><br><span class="line"></span><br><span class="line">db<span class="comment">;</span></span><br></pre></td></tr></table></figure> <h3 id="显示数据库列表"><a href="#显示数据库列表" class="headerlink" title="显示数据库列表"></a>显示数据库列表</h3><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show </span>dbs<span class="comment">;</span></span><br></pre></td></tr></table></figure> <h3 id="显示当前数据库中的集合（类似关系数据库中的表）"><a href="#显示当前数据库中的集合（类似关系数据库中的表）" class="headerlink" title="显示当前数据库中的集合（类似关系数据库中的表）"></a>显示当前数据库中的集合（类似关系数据库中的表）</h3><figure class="highlight mipsasm"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show </span>collections<span class="comment">;</span></span><br></pre></td></tr></table></figure> <h3 id="显示用户"><a href="#显示用户" class="headerlink" title="显示用户"></a>显示用户</h3><figure class="highlight sql"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">show</span> <span class="keyword">users</span>;</span><br></pre></td></tr></table></figure> <h3 id="从指定主机上克隆数据库"><a href="#从指定主机上克隆数据库" class="headerlink" title="从指定主机上克隆数据库"></a>从指定主机上克隆数据库</h3><blockquote> <p>将指定机器上的数据库的数据克隆到当前数据库</p> </blockquote> <figure class="highlight css"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="selector-tag">db</span><span class="selector-class">.cloneDatabase</span>(“127<span class="selector-class">.0</span><span class="selector-class">.0</span><span class="selector-class">.1</span>”);</span><br></pre></td></tr></table></figure> <h3 id="从指定的机器上复制指定数据库数据到某个数据库"><a href="#从指定的机器上复制指定数据库数据到某个数据库" class="headerlink" title="从指定的机器上复制指定数据库数据到某个数据库"></a>从指定的机器上复制指定数据库数据到某个数据库</h3><blockquote> <p>将本机的mydb的数据复制到temp数据库中</p> </blockquote> <figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db<span class="selector-class">.copyDatabase</span>(<span class="string">"mydb"</span>, <span class="string">"temp"</span>, <span class="string">"127.0.0.1"</span>);</span><br></pre></td></tr></table></figure> <h3 id="删除当前使用数据库"><a href="#删除当前使用数据库" class="headerlink" title="删除当前使用数据库"></a>删除当前使用数据库</h3><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db<span class="selector-class">.dropDatabase</span>();</span><br></pre></td></tr></table></figure> <h3 id="修复当前数据库"><a href="#修复当前数据库" class="headerlink" title="修复当前数据库"></a>修复当前数据库</h3><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db<span class="selector-class">.repairDatabase</span>();</span><br></pre></td></tr></table></figure> <blockquote> <p>db和getName方法是一样的效果，都可以查询当前使用的数据库</p> </blockquote> <h3 id="显示当前db状态"><a href="#显示当前db状态" class="headerlink" title="显示当前db状态"></a>显示当前db状态</h3><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db<span class="selector-class">.stats</span>();</span><br></pre></td></tr></table></figure> <h3 id="当前db版本"><a href="#当前db版本" class="headerlink" title="当前db版本"></a>当前db版本</h3><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db<span class="selector-class">.version</span>();</span><br></pre></td></tr></table></figure> <h3 id="查看当前db的链接机器地址"><a href="#查看当前db的链接机器地址" class="headerlink" title="查看当前db的链接机器地址"></a>查看当前db的链接机器地址</h3><figure class="highlight less"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">db<span class="selector-class">.getMongo</span>();</span><br></pre></td></tr></table></figure>
            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
      

  
  

  <article class="post post-type-normal " itemscope itemtype="http://schema.org/Article">

    
      <header class="post-header">

        
        
          <h1 class="post-title" itemprop="name headline">
            
            
              
                <a class="post-title-link" href="/2015/11/09/vscode/Mac命令行用Visual-Studio-Code编辑器打开/" itemprop="url">
                  Mac命令行用Visual Studio Code编辑器打开
                </a>
              
            
          </h1>
        

        <div class="post-meta">
          <span class="post-time">
            发表于
            <time itemprop="dateCreated" datetime="2015-11-09T15:12:22+08:00" content="2015-11-09">
              2015-11-09
            </time>
          </span>

          
            <span class="post-category" >
              &nbsp; | &nbsp; 分类于
              
                <span itemprop="about" itemscope itemtype="https://schema.org/Thing">
                  <a href="/categories/开发工具/" itemprop="url" rel="index">
                    <span itemprop="name">开发工具</span>
                  </a>
                </span>

                
                

              
            </span>
          

          
            
              <span class="post-comments-count">
                &nbsp; | &nbsp;
                <a href="/2015/11/09/vscode/Mac命令行用Visual-Studio-Code编辑器打开/#comments" itemprop="discussionUrl">
                  <span class="post-comments-count ds-thread-count" data-thread-key="2015/11/09/vscode/Mac命令行用Visual-Studio-Code编辑器打开/" itemprop="commentsCount"></span>
                </a>
              </span>
            
          

          

        </div>
      </header>
    


    <div class="post-body">

      
      

      
        
          <span itemprop="articleBody">
            
              <h2 id="Visual-Studio-Code-不卡了"><a href="#Visual-Studio-Code-不卡了" class="headerlink" title="Visual Studio Code 不卡了"></a>Visual Studio Code 不卡了</h2><p>前些日子一直在用 Atom 编辑器 ，很喜欢代码的面向，可用了些时间后 感觉越来越卡。<br>于是上手 Visual Studio Code，听说不卡！ O(∩_∩)O哈哈~</p> <h2 id="Setting-up-Visual-Studio-Code"><a href="#Setting-up-Visual-Studio-Code" class="headerlink" title="Setting up Visual Studio Code"></a>Setting up Visual Studio Code</h2><p>Getting up and running with VS Code is quick and easy. Follow the platform specific guides below as well as the list of handy tools.</p> <h3 id="Mac-OS-X"><a href="#Mac-OS-X" class="headerlink" title="Mac OS X"></a>Mac OS X</h3><ol> <li><a href="http://go.microsoft.com/fwlink/?LinkID=534106" target="_blank" rel="external">Download Visual Studio Code</a> for Mac OS X.</li> <li>Double-click on VSCode-osx.zip to expand the contents.</li> <li>Drag Visual Studio Code.app to the Applications folder, making it available in the Launchpad.</li> <li>Add VS Code to your Dock by right-clicking on the icon and choosing Options, Keep in Dock.</li> </ol> <blockquote> <p>Tip: If you want to run VS Code from the terminal, append the following to your ~/.bash_profile file (~/.zshrc in case you use zsh).</p> </blockquote> <figure class="highlight stata"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">code () &#123; VSCODE_CWD=<span class="string">"$PWD"</span> <span class="keyword">open</span> -<span class="keyword">n</span> -b <span class="string">"com.microsoft.VSCode"</span> --<span class="keyword">args</span> $* ;&#125;</span><br></pre></td></tr></table></figure> <p>Now, you can simply type code . in any folder to start editing files in that folder.</p> <p>参考 <a href="https://code.visualstudio.com/Docs/editor/setup" target="_blank" rel="external">https://code.visualstudio.com/Docs/editor/setup</a></p>
            
          </span>
        
      
    </div>

    <footer class="post-footer">
      

      

      
      
        <div class="post-eof"></div>
      
    </footer>
  </article>


    
  </section>

  
  <nav class="pagination">
    <a class="extend prev" rel="prev" href="/page/2/"><i class="fa fa-angle-left"></i></a><a class="page-number" href="/">1</a><a class="page-number" href="/page/2/">2</a><span class="page-number current">3</span><a class="page-number" href="/page/4/">4</a><a class="page-number" href="/page/5/">5</a><a class="extend next" rel="next" href="/page/4/"><i class="fa fa-angle-right"></i></a>
  </nav>



        </div>

        


        

      </div>

      
        
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <aside id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      

      <section class="site-overview sidebar-panel  sidebar-panel-active ">
        <div class="site-author motion-element" itemprop="author" itemscope itemtype="http://schema.org/Person">
          <img class="site-author-image" src="https://avatars0.githubusercontent.com/u/14232344?v=3&s=200" alt="Julaud" itemprop="image"/>
          <p class="site-author-name" itemprop="name">Julaud</p>
        </div>
        <p class="site-description motion-element" itemprop="description">不折腾，哪来的新技术</p>
        <nav class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">43</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            <a href="/categories">
              <span class="site-state-item-count">17</span>
              <span class="site-state-item-name">分类</span>
              </a>
          </div>

          <div class="site-state-item site-state-tags">
            <a href="/tags">
              <span class="site-state-item-count">53</span>
              <span class="site-state-item-name">标签</span>
              </a>
          </div>

        </nav>

        

        <div class="links-of-author motion-element">
          
        </div>

        
        

        <div class="links-of-author motion-element">
          
        </div>

      </section>

      

    </div>
  </aside>


      
    </main>

    <footer id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright" >
  
  &copy; 
  <span itemprop="copyrightYear">2016</span>
  <span class="with-love">
    <i class="icon-next-heart fa fa-heart"></i>
  </span>
  <span class="author" itemprop="copyrightHolder">Julaud</span>
</div>




      </div>
    </footer>

    <div class="back-to-top"></div>
  </div>

  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>

  
  

  
    

  
    
  

  <script type="text/javascript">
    var duoshuoQuery = {short_name:"panli-gg"};
    (function() {
      var ds = document.createElement('script');
      ds.type = 'text/javascript';ds.async = true;
      ds.id = 'duoshuo-script';
      ds.src = (document.location.protocol == 'https:' ? 'https:' : 'http:') + '//static.duoshuo.com/embed.js';
      ds.charset = 'UTF-8';
      (document.getElementsByTagName('head')[0]
      || document.getElementsByTagName('body')[0]).appendChild(ds);
    })();
  </script>
    
     


    
  

  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.5.2"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.5.2"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
<script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

<script type="text/javascript" src="/js/motion.js?v=0.4.5.2" id="motion.global"></script>


  <script type="text/javascript" src="/vendors/fastclick/lib/fastclick.min.js?v=1.0.6"></script>
  <script type="text/javascript" src="/vendors/jquery_lazyload/jquery.lazyload.js?v=1.9.7"></script>

  

  <script type="text/javascript" src="/js/bootstrap.js"></script>

  
  

  
  

</body>
</html>
